<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://geckoc.github.io/</id>
    <title>RichardTech</title>
    <updated>2021-04-03T04:45:17.425Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://geckoc.github.io/"/>
    <link rel="self" href="https://geckoc.github.io/atom.xml"/>
    <subtitle>æ¸©æ•…è€ŒçŸ¥æ–°</subtitle>
    <logo>https://geckoc.github.io/images/avatar.png</logo>
    <icon>https://geckoc.github.io/favicon.ico</icon>
    <rights>All rights reserved 2021, RichardTech</rights>
    <entry>
        <title type="html"><![CDATA[RabbitMQ]]></title>
        <id>https://geckoc.github.io/post/rabbitmq/</id>
        <link href="https://geckoc.github.io/post/rabbitmq/">
        </link>
        <updated>2021-04-03T04:41:26.000Z</updated>
        <content type="html"><![CDATA[<h2 id="rabbitmq-åˆè§ç«¯å€ª"><strong>RabbitMQ åˆè§ç«¯å€ª</strong></h2>
<ol>
<li>å¸¸è§æ¶ˆæ¯ä¸­é—´ä»¶
<ul>
<li>Kafka
<ul>
<li>ååé‡æœ€é«˜ï¼Œé€‚åˆå¤§æ•°æ®</li>
</ul>
</li>
<li>rocketMQ
<ul>
<li>QPS å‡ºè‡ªalibabaï¼Œæ€§èƒ½10w+</li>
</ul>
</li>
<li>activeMQ
<ul>
<li>å·²æ·˜æ±°ï¼Œååé‡è¾ƒä½</li>
</ul>
</li>
<li>rabbitMQ    ä½¿ç”¨<strong>AMQP</strong>åè®®
<ul>
<li>ç¤¾åŒºæ´»è·ƒåº¦é«˜ï¼Œæ€§èƒ½ç¨³å®š  <em>å“åº”é€Ÿåº¦å”¯ä¸€è¾¾åˆ°çº³ç§’</em></li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="rabbitmqåº”ç”¨åœºæ™¯"><em>RabbitMQ</em>åº”ç”¨åœºæ™¯</h3>
<ul>
<li>
<p>é€šè¿‡<em>NIO</em>å¼‚æ­¥å¤„ç†çŸ­æ—¶é—´èƒ½é«˜æµé‡æ¶Œå…¥æœåŠ¡å™¨çš„çº¿ç¨‹ï¼Œ è§£å†³æµé‡é«˜å³°æœŸçš„å“åº”é€Ÿåº¦å‡æ…¢ä»¥åŠç³»ç»Ÿå´©æºƒã€‚</p>
</li>
<li>
<p>å¯¹ç³»ç»Ÿè§£è€¦</p>
</li>
<li>
<p>é€šè¿‡Exchangeäº¤æ¢å‘é€æ¶ˆæ¯é˜Ÿåˆ—</p>
<ul>
<li>
<p><strong>Topic</strong> [åŠ¨æ€è·¯ç”±è§„åˆ™]</p>
<blockquote>
<p><strong>*</strong> è¡¨ç¤ºä¸€ä¸ªä¸”åªæœ‰ä¸€ä¸ªå•è¯  <strong>#</strong> è¡¨ç¤º0åˆ°ä»»æ„ä¸ª</p>
</blockquote>
</li>
<li>
<p><strong>fanout</strong> [å¹¿æ’­ç±»å‹ ä¸€å¯¹å¤š]</p>
</li>
<li>
<p><strong>direct</strong> [ä¸€å¯¹ä¸€]</p>
</li>
<li>
<p><strong>workqueue</strong> [æŒ‰éœ€åˆ†é…]</p>
</li>
</ul>
</li>
</ul>
<pre><code class="language-java">
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[SQLè¯­å¥æ‰§è¡Œæ…¢çš„åŸå› ï¼Ÿ]]></title>
        <id>https://geckoc.github.io/post/sql-yu-ju-zhi-xing-man-de-yuan-yin/</id>
        <link href="https://geckoc.github.io/post/sql-yu-ju-zhi-xing-man-de-yuan-yin/">
        </link>
        <updated>2021-04-02T00:56:05.000Z</updated>
        <content type="html"><![CDATA[<p>è¿™æ˜¯åœ¨æŸä¸€å…¬ä¼—å·çœ‹åˆ°çš„è…¾è®¯é¢è¯•ï¼Œè§‰å¾—ååˆ†å—ç”¨<br>
é¦–å…ˆè¦åˆ†ç±»è®¨è®ºï¼Œä¸€æ¡SQLè¯­å¥æ…¢åˆ†ä¸º</p>
<ul>
<li>å¤§å¤šæ•°æƒ…å†µä¸‹æ‰§è¡Œé€Ÿåº¦æ­£å¸¸ï¼Œå¶å°”å‡ºç°æ‰§è¡Œå˜æ…¢</li>
<li>ä¸€ç›´æ‰§è¡Œé€Ÿåº¦éƒ½å¾ˆæ…¢</li>
</ul>
<hr>
<ul>
<li>
<h2 id="é’ˆå¯¹å¶å°”å¾ˆæ…¢çš„æƒ…å†µ">é’ˆå¯¹å¶å°”å¾ˆæ…¢çš„æƒ…å†µ</h2>
<ul>
<li>é‚£ä¹ˆåŸå› å¯èƒ½å°±ä¸æ˜¯å‡ºç°åœ¨SQLè¯­å¥æœ¬èº«ï¼Œè€Œæ˜¯å…¶ä»–æ–¹é¢å› ç´ å¯¼è‡´çš„</li>
</ul>
</li>
</ul>
<p><em>å½“æˆ‘ä»¬è¦å¾€æ•°æ®åº“æ’å…¥ä¸€æ¡æ•°æ®ã€æˆ–è€…è¦æ›´æ–°ä¸€æ¡æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä»¬çŸ¥é“æ•°æ®åº“ä¼šåœ¨<strong>å†…å­˜</strong>ä¸­æŠŠå¯¹åº”å­—æ®µçš„æ•°æ®æ›´æ–°äº†ï¼Œä½†æ˜¯æ›´æ–°ä¹‹åï¼Œè¿™äº›æ›´æ–°çš„å­—æ®µå¹¶ä¸ä¼šé©¬ä¸ŠåŒæ­¥æŒä¹…åŒ–åˆ°<strong>ç£ç›˜</strong>ä¸­å»ï¼Œè€Œæ˜¯æŠŠè¿™äº›æ›´æ–°çš„è®°å½•å†™å…¥åˆ° redo log æ—¥è®°ä¸­å»ï¼Œç­‰åˆ°ç©ºé—²çš„æ—¶å€™ï¼Œåœ¨é€šè¿‡ redo log é‡Œçš„æ—¥è®°æŠŠæœ€æ–°çš„æ•°æ®åŒæ­¥åˆ°<strong>ç£ç›˜</strong>ä¸­å»</em></p>
<h3 id="æ•°æ®åº“åœ¨åˆ·æ–°è„é¡µflush">æ•°æ®åº“åœ¨<strong>åˆ·æ–°è„é¡µ</strong>ï¼ˆflushï¼‰</h3>
<blockquote>
<p>å½“å†…å­˜æ•°æ®é¡µè·Ÿç£ç›˜æ•°æ®é¡µå†…å®¹ä¸ä¸€è‡´çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç§°è¿™ä¸ªå†…å­˜é¡µä¸ºâ€œè„é¡µâ€ã€‚å†…å­˜æ•°æ®å†™å…¥åˆ°ç£ç›˜åï¼Œå†…å­˜å’Œç£ç›˜ä¸Šçš„æ•°æ®é¡µçš„å†…å®¹å°±ä¸€è‡´äº†ï¼Œç§°ä¸ºâ€œå¹²å‡€é¡µâ€ã€‚</p>
</blockquote>
<ul>
<li>åˆ·è„é¡µæœ‰ä»¥ä¸‹4ç§åœºæ™¯</li>
</ul>
<p>A. <strong>redo logæ—¥å¿—æ»¡äº†</strong></p>
<p>redo log é‡Œçš„å®¹é‡æ˜¯æœ‰é™çš„ï¼Œå¦‚æœæ•°æ®åº“ä¸€ç›´å¾ˆå¿™ï¼Œæ›´æ–°åˆå¾ˆé¢‘ç¹ï¼Œè¿™ä¸ªæ—¶å€™ redo log å¾ˆå¿«å°±ä¼šè¢«å†™æ»¡äº†ï¼Œè¿™ä¸ªæ—¶å€™å°±æ²¡åŠæ³•ç­‰åˆ°ç©ºé—²çš„æ—¶å€™å†æŠŠæ•°æ®åŒæ­¥åˆ°ç£ç›˜çš„ï¼Œåªèƒ½æš‚åœå…¶ä»–æ“ä½œï¼Œå…¨èº«å¿ƒæ¥æŠŠæ•°æ®åŒæ­¥åˆ°ç£ç›˜ä¸­å»çš„ï¼Œè€Œè¿™ä¸ªæ—¶å€™ï¼Œ<strong>å°±ä¼šå¯¼è‡´æˆ‘ä»¬å¹³æ—¶æ­£å¸¸çš„SQLè¯­å¥çªç„¶æ‰§è¡Œçš„å¾ˆæ…¢</strong>ï¼Œæ‰€ä»¥è¯´ï¼Œæ•°æ®åº“åœ¨åœ¨åŒæ­¥æ•°æ®åˆ°ç£ç›˜çš„æ—¶å€™ï¼Œå°±æœ‰å¯èƒ½å¯¼è‡´æˆ‘ä»¬çš„SQLè¯­å¥æ‰§è¡Œçš„å¾ˆæ…¢äº†ã€‚</p>
<p>B. <strong>å†…å­˜ä¸å¤Ÿç”¨äº†</strong></p>
<p>å¦‚æœä¸€æ¬¡æŸ¥è¯¢è¾ƒå¤šçš„æ•°æ®ï¼Œæ°å¥½ç¢°åˆ°æ‰€æŸ¥æ•°æ®é¡µä¸åœ¨å†…å­˜ä¸­æ—¶ï¼Œéœ€è¦ç”³è¯·å†…å­˜ï¼Œè€Œæ­¤æ—¶æ°å¥½å†…å­˜ä¸è¶³çš„æ—¶ å€™å°±éœ€è¦æ·˜æ±°ä¸€éƒ¨åˆ†å†…å­˜æ•°æ®é¡µï¼Œå¦‚æœæ˜¯å¹²å‡€é¡µï¼Œå°±ç›´æ¥é‡Šæ”¾ï¼Œå¦‚æœæ°å¥½æ˜¯è„é¡µå°±éœ€è¦åˆ·è„é¡µã€‚</p>
<p>C. <strong>MySQL è®¤ä¸ºç³»ç»Ÿâ€œç©ºé—²â€çš„æ—¶å€™</strong></p>
<p>è¿™æ—¶ç³»ç»Ÿæ²¡ä»€ä¹ˆå‹åŠ›ã€‚</p>
<p>D. <strong>MySQL æ­£å¸¸å…³é—­çš„æ—¶å€™</strong></p>
<p>è¿™æ—¶å€™ï¼ŒMySQL ä¼šæŠŠå†…å­˜çš„è„é¡µéƒ½ flush åˆ°ç£ç›˜ä¸Šï¼Œè¿™æ ·ä¸‹æ¬¡ MySQL å¯åŠ¨çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç›´æ¥ä»ç£ç›˜ä¸Šè¯»æ•°æ®ï¼Œå¯åŠ¨é€Ÿåº¦ä¼šå¾ˆå¿«ã€‚</p>
<h3 id="æ‹¿ä¸åˆ°é”æˆ‘èƒ½æ€ä¹ˆåŠ">æ‹¿ä¸åˆ°é”æˆ‘èƒ½æ€ä¹ˆåŠ</h3>
<p>è¿™ä¸ªå°±æ¯”è¾ƒå®¹æ˜“æƒ³åˆ°äº†ï¼Œæˆ‘ä»¬è¦æ‰§è¡Œçš„è¿™æ¡è¯­å¥ï¼Œåˆšå¥½è¿™æ¡è¯­å¥æ¶‰åŠåˆ°çš„<strong>è¡¨</strong>ï¼Œåˆ«äººåœ¨ç”¨ï¼Œå¹¶ä¸”åŠ é”äº†ï¼Œæˆ‘ä»¬æ‹¿ä¸åˆ°é”ï¼Œåªèƒ½æ…¢æ…¢ç­‰å¾…åˆ«äººé‡Šæ”¾é”äº†ã€‚æˆ–è€…ï¼Œè¡¨æ²¡æœ‰åŠ é”ï¼Œä½†è¦ä½¿ç”¨åˆ°çš„æŸä¸ªä¸€è¡Œè¢«åŠ é”äº†ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä¹Ÿæ²¡åŠæ³•å•Šã€‚</p>
<p>å¦‚æœè¦åˆ¤æ–­æ˜¯å¦çœŸçš„åœ¨ç­‰å¾…é”ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ <strong>show processlist</strong>è¿™ä¸ªå‘½ä»¤æ¥æŸ¥çœ‹å½“å‰çš„çŠ¶æ€å“¦ï¼Œè¿™é‡Œæˆ‘è¦æé†’ä¸€ä¸‹ï¼Œæœ‰äº›å‘½ä»¤æœ€å¥½è®°å½•ä¸€ä¸‹ï¼Œåæ­£ï¼Œæˆ‘è¢«é—®äº†å¥½å‡ ä¸ªå‘½ä»¤ï¼Œéƒ½ä¸çŸ¥é“æ€ä¹ˆå†™ï¼Œå‘µå‘µã€‚</p>
<p>ä¸‹æ¥æˆ‘ä»¬æ¥è®¿åˆ†æä¸‹ç¬¬äºŒç§æƒ…å†µï¼Œæˆ‘è§‰å¾—ç¬¬äºŒç§æƒ…å†µçš„åˆ†ææ‰æ˜¯æœ€é‡è¦çš„</p>
<h2 id="ä¸€ç›´æ‰§è¡Œé€Ÿåº¦éƒ½å¾ˆæ…¢">ä¸€ç›´æ‰§è¡Œé€Ÿåº¦éƒ½å¾ˆæ…¢</h2>
<p><em>å¦‚æœåœ¨æ•°æ®é‡ä¸€æ ·å¤§çš„æƒ…å†µä¸‹ï¼Œè¿™æ¡ SQL è¯­å¥æ¯æ¬¡éƒ½æ‰§è¡Œçš„è¿™ä¹ˆæ…¢ï¼Œé‚£å°±å°±è¦å¥½å¥½è€ƒè™‘ä¸‹ä½ çš„ SQL ä¹¦å†™äº†ï¼Œä¸‹é¢æˆ‘ä»¬æ¥åˆ†æä¸‹å“ªäº›åŸå› ä¼šå¯¼è‡´æˆ‘ä»¬çš„ SQL è¯­å¥æ‰§è¡Œçš„å¾ˆä¸ç†æƒ³ã€‚</em></p>
<p>æˆ‘ä»¬å…ˆæ¥å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè¡¨ï¼Œè¡¨é‡Œæœ‰ä¸‹é¢ä¸¤ä¸ªå­—æ®µ,åˆ†åˆ«æ˜¯ä¸»é”® idï¼Œå’Œä¸¤ä¸ªæ™®é€šå­—æ®µ c å’Œ dã€‚</p>
<pre><code class="language-mysql">mysql&gt; CREATE TABLE `t` (
  `id` int(11) NOT NULL,
  `c` int(11) DEFAULT NULL,
  `d` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB;
</code></pre>
<p>æ²¡æœ‰ç”¨ä¸Šç´¢å¼•ï¼Œæˆ‘è§‰å¾—è¿™ä¸ªåŸå› æ˜¯å¾ˆå¤šäººéƒ½èƒ½æƒ³åˆ°çš„ï¼Œä¾‹å¦‚ä½ è¦æŸ¥è¯¢è¿™æ¡è¯­å¥</p>
<pre><code class="language-mysql">select * from t where 100 &lt; c and c &lt; 100000;
</code></pre>
<ul>
<li>
<p><strong>æ²¡æœ‰ä½¿ç”¨ç´¢å¼•</strong></p>
<ul>
<li>åˆšå¥½ä½ çš„ c å­—æ®µä¸Šæ²¡æœ‰ç´¢å¼•ï¼Œé‚£ä¹ˆæŠ±æ­‰ï¼Œåªèƒ½èµ°å…¨è¡¨æ‰«æäº†ï¼Œä½ å°±ä½“éªŒä¸ä¼šç´¢å¼•å¸¦æ¥çš„ä¹è¶£äº†ï¼Œæ‰€ä»¥ï¼Œè¿™å›å¯¼è‡´è¿™æ¡æŸ¥è¯¢è¯­å¥å¾ˆæ…¢ã€‚</li>
</ul>
</li>
<li>
<p><strong>æœ‰ç´¢å¼•ï¼Œä½†æœªå¼•ç”¨åˆ°</strong></p>
<pre><code class="language-mysql"># åœ¨whereå­å¥åçš„å­—æ®µï¼Œå¯¹å­—æ®µè¿›è¡Œè¿›è¡Œäº†è¿ç®—æ“ä½œï¼Œä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆ
select * from table where b-1 = 1000;
# åº”è¯¥ä¸º select * from table where b = 1000 + 1;
# åœ¨whereå­å¥åçš„å­—æ®µï¼Œä½¿ç”¨äº†SQLå‡½æ•°()
select * from table where substring(name,1,3)='abc';
# æ­£ç¡®åº”è¯¥ select * from table where name = 'abc%';
</code></pre>
</li>
<li>
<p>æ•°æ®åº“è‡ªå·±é€‰é”™ç´¢å¼•é€‰é”™äº†**</p>
<p>æˆ‘ä»¬åœ¨è¿›è¡ŒæŸ¥è¯¢æ“ä½œçš„æ—¶å€™ï¼Œä¾‹å¦‚</p>
<pre><code class="language-mysql">select * from t where 100 &lt; c and c &lt; 100000;
</code></pre>
</li>
</ul>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œä¸»é”®ç´¢å¼•å’Œéä¸»é”®ç´¢å¼•çš„æœ‰åŒºåˆ«çš„ï¼Œä¸»é”®ç´¢å¼•å­˜æ”¾çš„å€¼æ˜¯<strong>æ•´è¡Œå­—æ®µçš„æ•°æ®</strong>ï¼Œè€Œéä¸»é”®ç´¢å¼•ä¸Šå­˜æ”¾çš„å€¼ä¸æ˜¯æ•´è¡Œå­—æ®µçš„æ•°æ®ï¼Œè€Œä¸”å­˜æ”¾<strong>ä¸»é”®å­—æ®µçš„å€¼</strong>ã€‚<br>
ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœèµ°çš„æ˜¯cè¿™ä¸ªå­—æ®µçš„ç´¢å¼•ï¼Œæœ€åä¼šæ‰¾åˆ°ä¸»é”®å­—æ®µçš„å€¼ï¼Œç„¶åæ ¹æ®ä¸»é”®å­—æ®µçš„å€¼èµ°ä¸»é”®ç´¢å¼•ï¼ŒæŸ¥è¯¢åˆ°æ•´è¡Œå­—æ®µçš„æ•°æ®ã€‚</p>
<p>ä½†æ˜¯ï¼Œå°±ç®—æ˜¯Cå­—æ®µä¸Šæœ‰ç´¢å¼•ï¼Œç³»ç»Ÿä¹Ÿä¸ä¸€å®šèµ°Cå­—æ®µç´¢å¼•ï¼Œè€Œæ˜¯æœ‰å¯èƒ½ç›´æ¥æ‰«æå…¨è¡¨</p>
<p><strong>ä¸ºä»€ä¹ˆå‘¢</strong>ï¼Ÿ</p>
<p>å…¶å®æ˜¯è¿™æ ·ï¼Œç³»ç»Ÿåœ¨æ‰§è¡Œè¿™æ¡è¯­å¥å‰ï¼Œä¼šè¿›è¡Œé¢„æµ‹ï¼Œç©¶ç«Ÿæ˜¯èµ°Cç´¢å¼•æ‰«æçš„è¡Œæ•°å°‘ï¼Œè¿˜æ˜¯å…¨è¡¨æ‰«æçš„è¡Œæ•°å°‘ï¼Ÿå› ä¸ºæ‰«æè¡Œæ•°å°‘å½“ç„¶æ˜¯è¶Šå¥½çš„ï¼Œæ„å‘³ç€I/Oæ“ä½œçš„æ¬¡æ•°è¶Šå°‘ã€‚</p>
<p>â€‹       å¦‚æœæ‰«æå…¨è¡¨çš„è¯ï¼Œé‚£ä¹ˆæ‰«æçš„æ¬¡æ•°å°±æ˜¯è¿™ä¸ªè¡¨çš„æ€»è¡Œæ•°äº†ï¼Œå‡è®¾ä¸ºn ;</p>
<p>è€Œå¦‚æœèµ°ç´¢å¼•Cçš„è¯ï¼Œæˆ‘ä»¬é€šè¿‡ç´¢å¼•cæ‰¾åˆ°ä¸»é”®å­—æ®µçš„å€¼ï¼Œå†é€šè¿‡ä¸»é”®å­—æ®µçš„å€¼æ‰¾åˆ°ä¸»é”®ç´¢å¼•æ¥æ‰¾æˆ‘ä»¬çš„æ•´è¡Œæ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´éœ€è¦æ‰¾ä¸¤æ¬¡ç´¢å¼•ï¼Œè€Œä¸”æˆ‘ä»¬ä¹Ÿä¸çŸ¥é“ 100&lt;c and c &lt; 10000 è¿™ä¸ªæ¡ä»¶çš„æ•°æ®æœ‰å¤šå°‘è¡Œï¼Œä¸‡ä¸€æ˜¯è¿™ä¸ªè¡¨çš„æ‰€æœ‰æ•°æ®éƒ½ç¬¦åˆå‘¢ï¼Ÿå°±æ„å‘³ç€èµ°cç´¢å¼•ä¸ä»…æ‰«æçš„è¡Œæ•°æ˜¯nï¼ŒåŒæ—¶è¿˜å¾—æ¯è¡Œæ•°æ®èµ°ä¸¤æ¬¡ç´¢å¼•ã€‚</p>
<p><strong>æ‰€ä»¥å‘¢ï¼Œç³»ç»Ÿæ˜¯æœ‰å¯èƒ½èµ°å…¨è¡¨æ‰«æè€Œä¸èµ°ç´¢å¼•çš„ã€‚é‚£ç³»ç»Ÿæ˜¯æ€ä¹ˆåˆ¤æ–­å‘¢ï¼Ÿ</strong></p>
<p>åˆ¤æ–­æ˜¯æ¥è‡ªç³»ç»Ÿçš„é¢„æµ‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœè¦èµ°Cç´¢å¼•ï¼Œç³»ç»Ÿä¼šé¢„æµ‹èµ°cå­—æ®µç´¢å¼•å¤§æ¦‚è¦æ‰«æå¤šå°‘è¡Œï¼Œå¦‚æœé¢„æµ‹æ•°æ®å¤šçš„è¯ï¼Œåˆ™å¾ˆå¯èƒ½ç›´æ¥ä¸èµ°ç´¢å¼•ç›´æ¥å…¨è¡¨æ‰«æäº†</p>
<p><strong>é—®é¢˜æ˜¯ï¼šç³»ç»Ÿæ˜¯å¦‚ä½•é¢„æµ‹çš„å‘¢?</strong></p>
<p>ç³»ç»Ÿæ˜¯æ ¹æ® <strong>ç´¢å¼•çš„åŒºåˆ†åº¦</strong> æ¥é¢„æµ‹çš„ï¼Œä¸€ä¸ªç´¢å¼•ä¸Šä¸åŒçš„å€¼è¶Šå¤šï¼Œ<strong>ç´¢å¼•çš„åŒºåˆ†åº¦</strong>è¶Šé«˜ï¼Œæ„å‘³ç€å‡ºç°ç›¸åŒæ•°å€¼çš„ç´¢å¼•è¶Šå°‘ï¼Œæˆ‘ä»¬ä¹ŸæŠŠç´¢å¼•åŒºåˆ†åº¦ç§°ä¹‹ä¸º <strong>åŸºæ•°</strong>ï¼Œå³åŒºåˆ†åº¦è¶Šé«˜ï¼ŒåŸºæ•°è¶Šå¤§ã€‚</p>
<p>åŸºæ•°è¶Šå¤§ï¼Œé‚£ä¹ˆç¬¦åˆ 100 &lt; c and c &lt; 10000çš„æ¡ä»¶è¡Œæ•°å°±è¶Šå°‘ã€‚</p>
<p>ä¸€ä¸ªç´¢å¼•çš„åŸºæ•°è¶Šå¤§ï¼Œæ„å‘³ç€èµ°ç´¢å¼•æŸ¥è¯¢è¶Šæœ‰ä¼˜åŠ¿ã€‚</p>
<p>é‚£ä¹ˆç³»ç»Ÿæ˜¯å¦‚ä½•çŸ¥é“è¿™ä¸ªç´¢å¼•çš„åŸºæ•°å‘¢ï¼Ÿ</p>
<p>ç³»ç»Ÿå½“ç„¶æ˜¯ä¸ä¼šéå†å…¨éƒ¨æ¥è·å¾—ä¸€ä¸ªç´¢å¼•çš„åŸºæ•°çš„ï¼Œä»£ä»·å¤ªå¤§äº†ï¼Œç´¢å¼•ç³»ç»Ÿæ˜¯é€šè¿‡éå†éƒ¨åˆ†æ•°æ®ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡<strong>é‡‡æ ·</strong>çš„æ–¹å¼ï¼Œæ¥é¢„æµ‹ç´¢å¼•çš„åŸºæ•°çš„ã€‚</p>
<p><strong>æ‰¯äº†è¿™ä¹ˆå¤šï¼Œé‡ç‚¹çš„æ¥äº†</strong>ï¼Œå±…ç„¶æ˜¯é‡‡æ ·ï¼Œé‚£å°±æœ‰å¯èƒ½å‡ºç°<strong>å¤±è¯¯</strong>çš„æƒ…å†µï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œc è¿™ä¸ªç´¢å¼•çš„åŸºæ•°å®é™…ä¸Šæ˜¯å¾ˆå¤§çš„ï¼Œä½†æ˜¯é‡‡æ ·çš„æ—¶å€™ï¼Œå´å¾ˆä¸å¹¸ï¼ŒæŠŠè¿™ä¸ªç´¢å¼•çš„åŸºæ•°é¢„æµ‹æˆå¾ˆå°ã€‚ä¾‹å¦‚ä½ é‡‡æ ·çš„é‚£ä¸€éƒ¨åˆ†æ•°æ®åˆšå¥½åŸºæ•°å¾ˆå°ï¼Œç„¶åå°±è¯¯ä»¥ä¸ºç´¢å¼•çš„åŸºæ•°å¾ˆå°ã€‚<strong>ç„¶åå°±å‘µå‘µï¼Œç³»ç»Ÿå°±ä¸èµ° c ç´¢å¼•äº†ï¼Œç›´æ¥èµ°å…¨éƒ¨æ‰«æäº†</strong>ã€‚</p>
<p>æ‰€ä»¥å‘¢ï¼Œè¯´äº†è¿™ä¹ˆå¤šï¼Œå¾—å‡ºç»“è®ºï¼š<strong>ç”±äºç»Ÿè®¡çš„å¤±è¯¯ï¼Œå¯¼è‡´ç³»ç»Ÿæ²¡æœ‰èµ°ç´¢å¼•ï¼Œè€Œæ˜¯èµ°äº†å…¨è¡¨æ‰«æ</strong>ï¼Œè€Œè¿™ï¼Œä¹Ÿæ˜¯å¯¼è‡´æˆ‘ä»¬ SQL è¯­å¥æ‰§è¡Œçš„å¾ˆæ…¢çš„åŸå› ã€‚</p>
<blockquote>
<p>è¿™é‡Œæˆ‘å£°æ˜ä¸€ä¸‹ï¼Œç³»ç»Ÿåˆ¤æ–­æ˜¯å¦èµ°ç´¢å¼•ï¼Œæ‰«æè¡Œæ•°çš„é¢„æµ‹å…¶å®åªæ˜¯åŸå› ä¹‹ä¸€ï¼Œè¿™æ¡æŸ¥è¯¢è¯­å¥æ˜¯å¦éœ€è¦ä½¿ç”¨ä½¿ç”¨ä¸´æ—¶è¡¨ã€æ˜¯å¦éœ€è¦æ’åºç­‰ä¹Ÿæ˜¯ä¼šå½±å“ç³»ç»Ÿçš„é€‰æ‹©çš„ã€‚</p>
</blockquote>
<p>ä¸è¿‡å‘¢ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™ä¹Ÿå¯ä»¥é€šè¿‡å¼ºåˆ¶èµ°ç´¢å¼•çš„æ–¹å¼æ¥æŸ¥è¯¢ï¼Œä¾‹å¦‚</p>
<pre><code class="language-mysql">select * from t force index(a) where c &lt; 100 and c &lt; 100000;
</code></pre>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡</p>
<pre><code class="language-mysql">show index from t;
</code></pre>
<p>æ¥æŸ¥è¯¢ç´¢å¼•çš„åŸºæ•°å’Œå®é™…æ˜¯å¦ç¬¦åˆï¼Œå¦‚æœå’Œå®é™…å¾ˆä¸ç¬¦åˆçš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥é‡æ–°æ¥ç»Ÿè®¡ç´¢å¼•çš„åŸºæ•°ï¼Œå¯ä»¥ç”¨è¿™æ¡å‘½ä»¤</p>
<pre><code class="language-mysql">analyze table t;
</code></pre>
<p>æ¥é‡æ–°ç»Ÿè®¡åˆ†æã€‚</p>
<p><strong>æ—¢ç„¶ä¼šé¢„æµ‹é”™ç´¢å¼•çš„åŸºæ•°ï¼Œè¿™ä¹Ÿæ„å‘³ç€ï¼Œå½“æˆ‘ä»¬çš„æŸ¥è¯¢è¯­å¥æœ‰å¤šä¸ªç´¢å¼•çš„æ—¶å€™ï¼Œç³»ç»Ÿæœ‰å¯èƒ½ä¹Ÿä¼šé€‰é”™ç´¢å¼•å“¦</strong>ï¼Œè¿™ä¹Ÿå¯èƒ½æ˜¯ SQL æ‰§è¡Œçš„å¾ˆæ…¢çš„ä¸€ä¸ªåŸå› ã€‚</p>
<p>å¥½å§ï¼Œå°±å…ˆæ‰¯è¿™ä¹ˆå¤šäº†ï¼Œä½ åˆ°æ—¶å€™èƒ½æ‰¯å‡ºè¿™ä¹ˆå¤šï¼Œæˆ‘è§‰å¾—å·²ç»å¾ˆæ£’äº†ï¼Œä¸‹é¢åšä¸€ä¸ªæ€»ç»“ã€‚</p>
<p><strong>å››ã€æ€»ç»“</strong></p>
<p>ä»¥ä¸Šæ˜¯æˆ‘çš„æ€»ç»“ä¸ç†è§£ï¼Œæœ€åä¸€ä¸ªéƒ¨åˆ†ï¼Œæˆ‘æ€•å¾ˆå¤šäººä¸å¤§æ‡‚<strong>æ•°æ®åº“å±…ç„¶ä¼šé€‰é”™ç´¢å¼•</strong>ï¼Œæ‰€ä»¥æˆ‘è¯¦ç»†è§£é‡Šäº†ä¸€ä¸‹ï¼Œä¸‹é¢æˆ‘å¯¹ä»¥ä¸Šåšä¸€ä¸ªæ€»ç»“ã€‚</p>
<p>ä¸€ä¸ª SQL æ‰§è¡Œçš„å¾ˆæ…¢ï¼Œæˆ‘ä»¬è¦åˆ†ä¸¤ç§æƒ…å†µè®¨è®ºï¼š</p>
<p>1ã€å¤§å¤šæ•°æƒ…å†µä¸‹å¾ˆæ­£å¸¸ï¼Œå¶å°”å¾ˆæ…¢ï¼Œåˆ™æœ‰å¦‚ä¸‹åŸå› </p>
<p>(1)ã€æ•°æ®åº“åœ¨åˆ·æ–°è„é¡µï¼Œä¾‹å¦‚ redo log å†™æ»¡äº†éœ€è¦åŒæ­¥åˆ°ç£ç›˜ã€‚</p>
<p>(2)ã€æ‰§è¡Œçš„æ—¶å€™ï¼Œé‡åˆ°é”ï¼Œå¦‚è¡¨é”ã€è¡Œé”ã€‚</p>
<p>2ã€è¿™æ¡ SQL è¯­å¥ä¸€ç›´æ‰§è¡Œçš„å¾ˆæ…¢ï¼Œåˆ™æœ‰å¦‚ä¸‹åŸå› ã€‚</p>
<p>(1)ã€æ²¡æœ‰ç”¨ä¸Šç´¢å¼•ï¼šä¾‹å¦‚è¯¥å­—æ®µæ²¡æœ‰ç´¢å¼•ï¼›ç”±äºå¯¹å­—æ®µè¿›è¡Œè¿ç®—ã€å‡½æ•°æ“ä½œå¯¼è‡´æ— æ³•ç”¨ç´¢å¼•ã€‚</p>
<p>(2)ã€æ•°æ®åº“é€‰é”™äº†ç´¢å¼•ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[FastDFS On Java]]></title>
        <id>https://geckoc.github.io/post/fastdfs-on-java/</id>
        <link href="https://geckoc.github.io/post/fastdfs-on-java/">
        </link>
        <updated>2021-03-25T00:41:47.000Z</updated>
        <summary type="html"><![CDATA[<h2 id="åœ¨javaå·¥ç¨‹ä¸­æ“ä½œfastdfså®ç°ä¸Šä¼ ä¸‹è½½æ›¿æ¢åˆ é™¤">åœ¨Javaå·¥ç¨‹ä¸­æ“ä½œFastDFSå®ç°ä¸Šä¼ ä¸‹è½½æ›¿æ¢åˆ é™¤...</h2>
]]></summary>
        <content type="html"><![CDATA[<h2 id="åœ¨javaå·¥ç¨‹ä¸­æ“ä½œfastdfså®ç°ä¸Šä¼ ä¸‹è½½æ›¿æ¢åˆ é™¤">åœ¨Javaå·¥ç¨‹ä¸­æ“ä½œFastDFSå®ç°ä¸Šä¼ ä¸‹è½½æ›¿æ¢åˆ é™¤...</h2>
<!-- more -->
<h3 id="fastdfsä¾èµ–">FastDFSä¾èµ–</h3>
<h2 id="ä»-å®˜æ–¹æºç ä¸Šä¸‹è½½fastdfsæºä»£ç åˆ°æœ¬åœ°å†é€šè¿‡å‘½ä»¤-mvn-clean-install-ç¼–è¯‘æ‰“åŒ…å¯¼å…¥-maven-æœ¬åœ°ä»“åº“ä½¿ç”¨å³å¯">ä» <a href="https://codeload.github.com/happyfish100/fastdfs-client-java/zip/master">å®˜æ–¹æºç </a>ä¸Šä¸‹è½½FastDFSæºä»£ç åˆ°æœ¬åœ°<br>
å†é€šè¿‡å‘½ä»¤ mvn clean install ç¼–è¯‘æ‰“åŒ…å¯¼å…¥ Maven æœ¬åœ°ä»“åº“ä½¿ç”¨å³å¯ã€‚<br>
<img src="https://geckoc.github.io//post-images/1616641994193.png" alt="" loading="lazy"></h2>
<h3 id="åˆ›å»ºå·¥ç¨‹">åˆ›å»ºå·¥ç¨‹</h3>
<figure data-type="image" tabindex="1"><img src="https://geckoc.github.io//post-images/1616634040489.png" alt="" loading="lazy"></figure>
<figure data-type="image" tabindex="2"><img src="https://geckoc.github.io//post-images/1616642202855.png" alt="" loading="lazy"></figure>
<h3 id="æ·»åŠ ä¾èµ–-poxxml">æ·»åŠ ä¾èµ–  pox.xml</h3>
<p>åœ¨é¡¹ç›®çš„ pom.xml ä¸­æ·»åŠ ä»¥ä¸‹éœ€è¦ç”¨åˆ°çš„ä¾èµ–</p>
<pre><code class="language-xml">&lt;dependencies&gt; 
    &lt;!--FastDFSçš„javaå®¢æˆ·ç«¯ä¾èµ–--&gt;
    &lt;dependency&gt; 
      &lt;groupId&gt;org.csource&lt;/groupId&gt;  
      &lt;artifactId&gt;fastdfs-client-java&lt;/artifactId&gt;  
      &lt;version&gt;1.27-SNAPSHOT&lt;/version&gt; 
    &lt;/dependency&gt;
    &lt;!-- apache commons lang3 å·¥å…·åŒ… --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;
      &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;
      &lt;version&gt;3.11&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt; 
</code></pre>
<h3 id="ç¼–è¾‘é…ç½®æ–‡ä»¶-fdfs_clientconf">ç¼–è¾‘é…ç½®æ–‡ä»¶ fdfs_client.conf</h3>
<p>åœ¨githubä¸‹è½½çš„fastdfs-client-java-masterä¸­è§£å‹ç¼©åè¿›å…¥æœ‰ä¸€ä¸ªfdfs_client.conf<br>
å°†å…¶copyåˆ°é¡¹ç›®ä¸­</p>
<pre><code>connect_timeout = 2
network_timeout = 30
# å­—ç¬¦é›†
charset = UTF-8
# tracker æœåŠ¡å™¨ HTTP åè®®ä¸‹æš´éœ²çš„ç«¯å£
http.tracker_http_port = 8080
http.anti_steal_token = no
http.secret_key = FastDFS1234567890
# tracker æœåŠ¡å™¨çš„ipå’Œç«¯å£
tracker_server = 192.168.182.128:22122
#tracker_server = 10.0.11.248:22122
#tracker_server = 10.0.11.249:22122
</code></pre>
<h3 id="åˆ›å»ºå·¥å…·ç±»">åˆ›å»ºå·¥å…·ç±»</h3>
<p>è·å–å…ƒæ•°æ®æ—¶ï¼Œå¦‚æœä½ ä¸Šä¼ æ—¶æ²¡æœ‰ç»™å®šå…ƒæ•°æ®ï¼Œåˆ™è·å–ä¸åˆ°<br>
å¯åœ¨æ–‡ä»¶ä¸Šä¼ æ—¶ç»™å®šå…ƒæ•°æ®<br>
NameValuePair[] metaList = null;<br>
// ç¬¬ä¸€ç»„å…ƒæ•°æ®ï¼Œæ–‡ä»¶çš„åŸå§‹åç§°<br>
metaList[0] = new NameValuePair(&quot;file_name&quot;, fileName);<br>
// ç¬¬äºŒç»„å…ƒæ•°æ®...ç­‰ç­‰<br>
metaList[1] = new NameValuePair(&quot;file_length&quot;, fileLen);</p>
<pre><code class="language-java">package com.gecko.fastdfs.util;

import org.apache.commons.lang3.StringUtils;
import org.csource.common.MyException;
import org.csource.common.NameValuePair;
import org.csource.fastdfs.*;

import java.io.File;
import java.io.IOException;

/**
 * FastDFS åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ Java å®¢æˆ·ç«¯å·¥å…·ç±»
 * å…·ä½“åŠŸèƒ½ï¼šæ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ã€æ›¿æ¢ã€åˆ é™¤ã€æŸ¥è¯¢æ–‡ä»¶å…ƒæ•°æ®ã€æŸ¥çœ‹æ–‡ä»¶è¯¦æƒ…
 */
public class FastDFSUtils {
    private static TrackerServer trackerServer = null;
    private static StorageServer storageServer = null;
    private static StorageClient storageClient = null;

    static {
        //1.åŠ è½½é…ç½®æ–‡ä»¶ï¼Œé»˜è®¤å»classpathä¸‹åŠ è½½
        try {
            ClientGlobal.init(&quot;fdfs_client.conf&quot;);
        //2.åˆ›å»ºTrackerClientå¯¹è±¡
        TrackerClient trackerClient = new TrackerClient();
        //3.åˆ›å»ºTrackerServerå¯¹è±¡
            trackerServer = trackerClient.getConnection();
        //4.åˆ›å»ºStorageServerå¯¹è±¡
            storageServer = trackerClient.getStoreStorage(trackerServer);
            //5.åˆ›å»ºStorageClientå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å®Œæˆå¯¹æ–‡ä»¶çš„æ“ä½œ
            storageClient = new StorageClient(trackerServer, storageServer);
        } catch (IOException | MyException e) {
            e.printStackTrace();
        }
    }

    /**
     * èµ„æºé‡Šæ”¾
     */
    public static void releaseFastDFS() {
        if (storageServer != null) {
            try {
                storageServer.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        if (trackerServer != null) {
            try {
                trackerServer.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

    }

    /**
     * æ–‡ä»¶ä¸Šä¼ 
     * @param localFileName æœ¬åœ°æ–‡ä»¶å[å…·ä½“ä½ç½®+æ–‡ä»¶å]
     * @param fileExtName   ä¸Šä¼ æ–‡ä»¶çš„åç¼€
     */
    public static void fileUpload(String localFileName, String fileExtName) {
        try {
            //6.ä¸Šä¼ æ–‡ä»¶  ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæœ¬åœ°æ–‡ä»¶è·¯å¾„ ç¬¬äºŒä¸ªå‚æ•°ï¼šä¸Šä¼ æ–‡ä»¶çš„åç¼€ ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šæ–‡ä»¶ä¿¡æ¯
            String[] uploadArray = storageClient.upload_file(localFileName, fileExtName, null);
            for (String str : uploadArray) {
                System.out.println(str);
                // http:192.168.182.128/group1/M00/00/00/wKi2gGBas4aAEAdlACoeC5KngBs554.jpg
            }
        } catch (IOException | MyException e) {
            e.printStackTrace();
        } finally {
            releaseFastDFS();
        }
    }

    /**
     * æ–‡ä»¶ä¸Šä¼ 
     * @param bytes            byteå­—èŠ‚æ•°ç»„
     * @param fileExtName      æ–‡ä»¶æ‹“å±•å[åç¼€]
     * @return ç»„å/è¿œç¨‹æ–‡ä»¶å   group1/M00/00/00/....
     */
    public static String fileUpload(byte[] bytes, String fileExtName) {
        try {
            String[] uploadFile = storageClient.upload_file(bytes, fileExtName, null);
            for (String str : uploadFile) {
                System.out.println(str);
            }
            StringBuilder stringBuilder = new StringBuilder();
            stringBuilder.append(&quot;http://192.168.182.128/&quot;);
            stringBuilder.append(uploadFile[0]);
            stringBuilder.append(&quot;/&quot;);
            stringBuilder.append(uploadFile[1]);
            return stringBuilder.toString();
        } catch (IOException | MyException e) {
            e.printStackTrace();
        } finally {
            releaseFastDFS();
        }
        return null;
    }

    /**
     * æ–‡ä»¶ä¸‹è½½
     * @param groupName       ç»„/å·åï¼Œé»˜è®¤å€¼ï¼šgroup1
     * @param remoteFileName  æ–‡ä»¶åï¼Œä¾‹å¦‚ï¼š&quot;M00/00/00/wKgKZl9tkTCAJAanAADhaCZ_RF0495.jpg&quot;
     * @param localFileName   æœ¬åœ°æ–‡ä»¶ä½ç½®  D:/222.jpg
     * @return 0ä¸ºæˆåŠŸ ï¼Œé0ä¸ºå¤±è´¥
     */
    public static int fileDownload(String groupName, String remoteFileName, String localFileName){

        int count = -1;
        try {
            count = storageClient.download_file(groupName == null ? &quot;group1&quot; : groupName, remoteFileName, localFileName);
            System.out.println(&quot;downloadFile : &quot; + count);
        } catch (IOException | MyException e) {
            e.printStackTrace();
        } finally {
            releaseFastDFS();
        }
        return count;
    }
    /**
     * æ–‡ä»¶ä¸‹è½½
     * @param groupName       ç»„/å·åï¼Œé»˜è®¤å€¼ï¼šgroup1
     * @param remoteFileName  æ–‡ä»¶åï¼Œä¾‹å¦‚ï¼š&quot;M00/00/00/wKgKZl9tkTCAJAanAADhaCZ_RF0495.jpg&quot;
     * @return byte[]       æ–‡ä»¶å­—èŠ‚æ•°ç»„
     */
    public static byte[] fileDownload(String groupName, String remoteFileName) {
        byte[] bytes = null;
        try {
             bytes = storageClient.download_file(groupName, remoteFileName);
        } catch (IOException | MyException e) {
            e.printStackTrace();
        } finally {
            releaseFastDFS();
        }
        return bytes;
    }
    /**
     * æ–‡ä»¶åˆ é™¤
     *
     * @param groupName      ç»„/å·åï¼Œé»˜è®¤å€¼ï¼šgroup1
     * @param remoteFileName æ–‡ä»¶åï¼Œä¾‹å¦‚ï¼š&quot;M00/00/00/wKgKZl9tkTCAJAanAADhaCZ_RF0495.jpg&quot;
     * @return 0ä¸ºæˆåŠŸ trueï¼Œé0ä¸ºå¤±è´¥ false
     */
    public static boolean fileDelete(String groupName, String remoteFileName) {
        int delete_file = -1;
        try {
            delete_file = storageClient.delete_file(groupName, remoteFileName);
            System.out.println(&quot;deleteCount : &quot; + delete_file);
        } catch (IOException | MyException e) {
            e.printStackTrace();
        } finally {
            releaseFastDFS();
        }
        return delete_file == 0;
    }

    /**
     * ä¿®æ”¹ä¸€ä¸ªå·²ç»å­˜åœ¨çš„æ–‡ä»¶
     *
     * @param oldGroupName æ—§ç»„å
     * @param oldFileName  æ—§æ–‡ä»¶å
     * @param bytes         æ–°æ–‡ä»¶
     * @param fileName     æ–°æ–‡ä»¶å
     * @return
     */
    public static String modifyFile(String oldGroupName, String oldFileName, byte[] bytes, String fileName) {
        // å…ˆä¸Šä¼ 
        String fileUpload = fileUpload(bytes, fileName);
        if (fileUpload == null) {
            return null;
        }
        // å†åˆ é™¤
        boolean delResult = fileDelete(oldGroupName, oldFileName);
        if (delResult) {
            return null;
        }
        return fileUpload;
    }
    /**
     * è·å–å…ƒæ•°æ®
     *
     * @param groupName      ç»„/å·åï¼Œé»˜è®¤å€¼ï¼šgroup1
     * @param remoteFileName æ–‡ä»¶åï¼Œä¾‹å¦‚ï¼š&quot;M00/00/00/wKgKZl9tkTCAJAanAADhaCZ_RF0495.jpg&quot;
     * @return æ–‡ä»¶çš„å…ƒæ•°æ®æ•°ç»„
     */
    public static NameValuePair[] getMetaData(String groupName, String remoteFileName) {
        try {
            // æ ¹æ®ç»„åå’Œæ–‡ä»¶åé€šè¿‡ Storage å®¢æˆ·ç«¯è·å–æ–‡ä»¶çš„å…ƒæ•°æ®æ•°ç»„
            return storageClient.get_metadata(groupName == null ? &quot;group1&quot; : groupName, remoteFileName);
        } catch (IOException | MyException e) {
            e.printStackTrace();
        }
        return null;
    }

    /**
     * è·å–æ–‡ä»¶è¯¦æƒ…
     *
     * @param groupName      ç»„/å·åï¼Œé»˜è®¤å€¼ï¼šgroup1
     * @param remoteFileName æ–‡ä»¶åï¼Œä¾‹å¦‚ï¼š&quot;M00/00/00/wKgKZl9tkTCAJAanAADhaCZ_RF0495.jpg&quot;
     * @return æ–‡ä»¶è¯¦æƒ…
     */
    public static FileInfo getFileInfo(String groupName, String remoteFileName) {
        try {
            return storageClient.get_file_info(groupName == null ? &quot;group1&quot; : groupName, remoteFileName);
        } catch (IOException | MyException e) {
            e.printStackTrace();
        }
        return null;
    }


    /**
     * è·å–æ–‡ä»¶åç¼€åï¼ˆä¸å¸¦ç‚¹ï¼‰
     *
     * @param fileName æ–‡ä»¶åç§°
     * @return å¦‚ï¼š&quot;jpg&quot; or &quot;&quot;
     */
    public static String getFileExt(String fileName) {
        if (StringUtils.isBlank(fileName) || !fileName.contains(&quot;.&quot;)) {
            return &quot;&quot;;
        }
        return fileName.substring(fileName.lastIndexOf(&quot;.&quot;) + 1); // ä¸å¸¦æœ€åçš„ç‚¹
    }

    /**
     * è·å–æ–‡ä»¶åç¼€åï¼ˆå¸¦ç‚¹ï¼‰
     *
     * @param fileName æ–‡ä»¶åç§°
     * @return å¦‚ï¼š&quot;.jpg  .gif&quot; or &quot;&quot;
     */
    public static String getFileExtWithPoint(String fileName) {
        if (StringUtils.isBlank(fileName) || !fileName.contains(&quot;.&quot;)) {
            return &quot;&quot;;
        }
        return fileName.substring(fileName.lastIndexOf(&quot;.&quot;)); // å¸¦æœ€åçš„ç‚¹
    }

}
</code></pre>
<h3 id="æµ‹è¯•">æµ‹è¯•</h3>
<p>åœ¨ä¸‹é¢åˆ›å»ºmainæ–¹æ³•æµ‹è¯•æˆ–å•å…ƒæµ‹è¯•  finish</p>
<pre><code class="language-java">    public static void main(String[] args) {
        fileDownload(&quot;group1&quot;, &quot;M00/00/00/wKi2gGBatYiASR5EACoeC5KngBs842.jpg&quot;, &quot;D:/888.jpg&quot;);
    }
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[PathVariableå’ŒRequestParam]]></title>
        <id>https://geckoc.github.io/post/pathvariable-he-requestparam/</id>
        <link href="https://geckoc.github.io/post/pathvariable-he-requestparam/">
        </link>
        <updated>2021-03-09T10:16:20.000Z</updated>
        <summary type="html"><![CDATA[<ul>
<li>åœ¨Springä¸­çš„ä¸¤ä¸ªæ³¨è§£ <strong>@PathVariable</strong>  ---- <strong>@RequestParam</strong>
<ul>
<li>æˆ‘ä»¬å¯ä»¥ä»è¯·æ±‚ä¸­è·å–æŸ¥è¯¢å‚æ•°ï¼Œè¡¨å•å‚æ•°ç”šè‡³æ–‡ä»¶</li>
<li><strong>@RequestParam</strong>å’Œ**@PathVariable**éƒ½èƒ½å¤Ÿå®Œæˆç±»ä¼¼çš„åŠŸèƒ½â€”â€”å› ä¸ºæœ¬è´¨ä¸Šï¼Œå®ƒä»¬éƒ½æ˜¯ç”¨æˆ·çš„è¾“å…¥ï¼Œåªä¸è¿‡è¾“å…¥çš„éƒ¨åˆ†ä¸åŒï¼Œä¸€ä¸ªåœ¨URLè·¯å¾„éƒ¨åˆ†ï¼Œå¦ä¸€ä¸ªåœ¨å‚æ•°éƒ¨åˆ†ã€‚<br>
äº‹å®ä¸Šï¼Œè¿™ä¸¤ç§URLè®¾è®¡éƒ½æ˜¯å¯ä»¥çš„ï¼š</li>
</ul>
</li>
</ul>
]]></summary>
        <content type="html"><![CDATA[<ul>
<li>åœ¨Springä¸­çš„ä¸¤ä¸ªæ³¨è§£ <strong>@PathVariable</strong>  ---- <strong>@RequestParam</strong>
<ul>
<li>æˆ‘ä»¬å¯ä»¥ä»è¯·æ±‚ä¸­è·å–æŸ¥è¯¢å‚æ•°ï¼Œè¡¨å•å‚æ•°ç”šè‡³æ–‡ä»¶</li>
<li><strong>@RequestParam</strong>å’Œ**@PathVariable**éƒ½èƒ½å¤Ÿå®Œæˆç±»ä¼¼çš„åŠŸèƒ½â€”â€”å› ä¸ºæœ¬è´¨ä¸Šï¼Œå®ƒä»¬éƒ½æ˜¯ç”¨æˆ·çš„è¾“å…¥ï¼Œåªä¸è¿‡è¾“å…¥çš„éƒ¨åˆ†ä¸åŒï¼Œä¸€ä¸ªåœ¨URLè·¯å¾„éƒ¨åˆ†ï¼Œå¦ä¸€ä¸ªåœ¨å‚æ•°éƒ¨åˆ†ã€‚<br>
äº‹å®ä¸Šï¼Œè¿™ä¸¤ç§URLè®¾è®¡éƒ½æ˜¯å¯ä»¥çš„ï¼š</li>
</ul>
</li>
</ul>
<!-- more -->
<ul>
<li>
<p>é€šè¿‡**@PathVariable**ï¼Œä¾‹å¦‚/blogs/1</p>
</li>
<li>
<p>é€šè¿‡**@RequestParam**ï¼Œä¾‹å¦‚blogs?blogId=1</p>
</li>
<li>
<p>æ ¹æ®ä¸åŒåº”ç”¨åœºæ™¯æ¥é€‰æ‹©ä½¿ç”¨ï¼š</p>
<ul>
<li>å½“<em>URL</em>æŒ‡å‘çš„æ˜¯æŸä¸€å…·ä½“ä¸šåŠ¡èµ„æºï¼ˆæˆ–èµ„æºåˆ—è¡¨ï¼‰ï¼Œä½¿ç”¨**@PathVariable**</li>
<li>å½“<em>URL</em>éœ€è¦å¯¹èµ„æºæˆ–è€…èµ„æºåˆ—è¡¨è¿›è¡Œè¿‡æ»¤ï¼Œç­›é€‰æ—¶ï¼Œä½¿ç”¨**@RequestParam**</li>
</ul>
</li>
</ul>
<hr>
<h3 id="å‚æ•°çš„å±æ€§å€¼">å‚æ•°çš„å±æ€§å€¼</h3>
<ol>
<li><strong>name</strong> (æŒ‡å®šè¯·æ±‚å‚æ•°åç§°)<br>
+ åœ¨å˜é‡åç§°å’Œå‚æ•°åç§°éƒ½ç›¸åŒçš„æƒ…å†µåˆ™ä¸éœ€åˆ¶å®šã€‚ä½†æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›è¿™äº›ä¸åŒã€‚æˆ–è€…ï¼Œå¦‚æœæˆ‘ä»¬ä¸ä½¿ç”¨Spring Bootï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦è¿›è¡Œç‰¹æ®Šçš„ç¼–è¯‘æ—¶é…ç½®ï¼Œå¦åˆ™å‚æ•°åç§°å®é™…ä¸Šä¸ä¼šåœ¨ç¼–è¯‘åçš„å­—èŠ‚ç ä¸­</li>
</ol>
<pre><code class="language-java">    @GetMapping(&quot;/user/play&quot;)
    @ResponseBody
    public String toLoanInfo(@RequestParam(name = &quot;id&quot;) String userId, @RequestParam name){

        return &quot;play: &quot; + userId + name;
    }
</code></pre>
<ol start="2">
<li><strong>value</strong>
<ul>
<li>@RequestParamï¼ˆvalue =â€œidâ€ï¼‰ç­‰åŒäº @RequestParamï¼ˆâ€œidâ€ï¼‰</li>
</ul>
</li>
<li><strong>required</strong>
<ul>
<li>ä¸€æ—¦æˆ‘ä»¬åœ¨æ–¹æ³•ä¸­å®šä¹‰äº†@RequestParamå˜é‡ï¼Œå¦‚æœè®¿é—®çš„uriä¸­ä¸å¸¦æœ‰ç›¸åº”çš„å‚æ•°ï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸â€”â€”è¿™æ˜¯æ˜¾ç„¶çš„ï¼ŒSpringå°è¯•å¸®æˆ‘ä»¬è¿›è¡Œç»‘å®šï¼Œç„¶è€Œæ²¡æœ‰æˆåŠŸã€‚ä½†æœ‰çš„æ—¶å€™ï¼Œå‚æ•°ç¡®å®ä¸ä¸€å®šæ°¸è¿œéƒ½å­˜åœ¨ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡å®šä¹‰requiredå±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å°†@RequestParamçš„requiredè®¾ç½®ä¸ºfalse ï¼Œé»˜è®¤ä¸ºtrueï¼ˆå¿…é€‰ï¼‰ï¼š</li>
</ul>
</li>
</ol>
<pre><code class="language-java">    @GetMapping(&quot;/user/play&quot;)
    @ResponseBody
    public String toLoanInfo(@RequestParam(required = false) String id){

        return &quot;play: &quot; + id;
    }
</code></pre>
<ol start="4">
<li><strong>defaultValue</strong>
<ul>
<li>åœ¨å‚æ•°ä¸å­˜åœ¨çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½å¸Œæœ›å˜é‡æœ‰ä¸€ä¸ªé»˜è®¤å€¼</li>
</ul>
</li>
</ol>
<p><code>@RequestParam(value = &quot;id&quot;, required = false, defaultValue = &quot;0&quot;)</code></p>
<p>æ³¨æ„ï¼šåœ¨ä½¿@PathVariableæˆä¸ºå¯é€‰æ—¶æˆ‘ä»¬åº”è¯¥å°å¿ƒï¼Œä»¥é¿å…è·¯å¾„å†²çªã€‚</p>
<p>åœ¨<strong>SpringBoot</strong>çš„<em>Thymeleaf</em>è¡¨è¾¾å¼ä¸­ï¼Œä½¿ç”¨@PathVariableéœ€è¦ç¬¦åˆå…¶URLé£æ ¼</p>
<pre><code class="language-html">  &lt;!-- Restful Style éœ€è¦ + å·æ‹¼æ¥ï¼Œè·¯å¾„åçš„æ–œæ ä¸èƒ½å¿½ç•¥ --&gt;
  &lt;a th:href=&quot;@{'/user/play/'+æ‹¼æ¥çš„å‚æ•°}&quot;&gt;è·³è½¬&lt;/a&gt;
  &lt;!-- Normal Style --&gt;
  &lt;a th:href=&quot;@{/user/play(id=&quot;id&quot;,name=&quot;name&quot;)}&quot;&gt;è·³è½¬&lt;/a&gt;
</code></pre>
<p>è€Œ**@PathVariable**ä¸­ä½¿ç”¨required=false è¿˜éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå½“å‚æ•°ä¸å­˜åœ¨æ—¶ï¼Œéœ€è¦é…ç½®å¤šä¸ªuriæ˜ å°„ï¼Œé¿å…404</p>
<pre><code class="language-java">@GetMapping({&quot;/user/play/{productType}&quot;,&quot;/user/play/&quot;})
public String toLoanInfo(@PathVariable(required = false) Integer productType){
        return &quot;play&quot;;
}
</code></pre>
<hr>
<h4 id="æ‹“å±•">æ‹“å±•</h4>
<h5 id="uriç¼–ç ">URIç¼–ç </h5>
<blockquote>
<p>RFC3986æ–‡æ¡£è§„å®šï¼ŒUrlä¸­åªå…è®¸åŒ…å«è‹±æ–‡å­—æ¯ï¼ˆa-zA-Zï¼‰ã€æ•°å­—ï¼ˆ0-9ï¼‰ã€-_.~4ä¸ªç‰¹æ®Šå­—ç¬¦ä»¥åŠæ‰€æœ‰ä¿ç•™å­—ç¬¦ã€‚US-ASCIIå­—ç¬¦é›†ä¸­æ²¡æœ‰å¯¹åº”çš„å¯æ‰“å°å­—ç¬¦ï¼šUrlä¸­åªå…è®¸ä½¿ç”¨å¯æ‰“å°å­—ç¬¦ã€‚US-ASCIIç ä¸­çš„10-7Få­—èŠ‚å…¨éƒ½è¡¨ç¤ºæ§åˆ¶å­—ç¬¦ï¼Œè¿™äº›å­—ç¬¦éƒ½ä¸èƒ½ç›´æ¥å‡ºç°åœ¨Urlä¸­ã€‚åŒæ—¶ï¼Œå¯¹äº80-FFå­—èŠ‚ï¼ˆISO-8859-1ï¼‰ï¼Œç”±äºå·²ç»è¶…å‡ºäº†US-ACIIå®šä¹‰çš„å­—èŠ‚èŒƒå›´ï¼Œå› æ­¤ä¹Ÿä¸å¯ä»¥æ”¾åœ¨Urlä¸­ã€‚</p>
</blockquote>
<blockquote>
<p>ä¿ç•™å­—ç¬¦ï¼šUrlå¯ä»¥åˆ’åˆ†æˆè‹¥å¹²ä¸ªç»„ä»¶ï¼Œåè®®ã€ä¸»æœºã€è·¯å¾„ç­‰ã€‚æœ‰ä¸€äº›å­—ç¬¦ï¼ˆğŸ˜•?#[]@ï¼‰æ˜¯ç”¨ä½œåˆ†éš”ä¸åŒç»„ä»¶çš„ã€‚ä¾‹å¦‚ï¼šå†’å·ç”¨äºåˆ†éš”åè®®å’Œä¸»æœºï¼Œ/ç”¨äºåˆ†éš”ä¸»æœºå’Œè·¯å¾„ï¼Œ?ç”¨äºåˆ†éš”è·¯å¾„å’ŒæŸ¥è¯¢å‚æ•°ï¼Œç­‰ç­‰ã€‚è¿˜æœ‰ä¸€äº›å­—ç¬¦ï¼ˆ!$&amp;â€™()*+,;=ï¼‰ç”¨äºåœ¨æ¯ä¸ªç»„ä»¶ä¸­èµ·åˆ°åˆ†éš”ä½œç”¨çš„ï¼Œå¦‚=ç”¨äºè¡¨ç¤ºæŸ¥è¯¢å‚æ•°ä¸­çš„é”®å€¼å¯¹ï¼Œ&amp;ç¬¦å·ç”¨äºåˆ†éš”æŸ¥è¯¢å¤šä¸ªé”®å€¼å¯¹ã€‚å½“ç»„ä»¶ä¸­çš„æ™®é€šæ•°æ®åŒ…å«è¿™äº›ç‰¹æ®Šå­—ç¬¦æ—¶ï¼Œéœ€è¦å¯¹å…¶è¿›è¡Œç¼–ç ã€‚RFC3986ä¸­æŒ‡å®šäº†ä»¥ä¸‹å­—ç¬¦ä¸ºä¿ç•™å­—ç¬¦ï¼š! * â€™ ( ) ; : @ &amp; = + $ , / ? # [ ]</p>
</blockquote>
<p>æ„Ÿå…´è¶£å¯ä»¥åšä¸ªæµ‹è¯•ï¼š<strong>@PathVariable</strong>å’Œ**@RequestParam<strong>ä¸¤ç§æ³¨è§£çš„ç¼–ç é—®é¢˜<br>
<strong>@PathVariable</strong> ä»è·¯å¾„ä¸­è·å–æ˜¯ä¸ç”¨ç¼–ç è§£ç çš„ï¼Œè€Œ</strong>@RequestParam**ä¼šè¿›è¡Œç¼–ç è§£ç ã€‚è¿™ç§ç‰¹æ€§å¾ˆå°‘æœ‰äººæ³¨æ„åˆ°</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[SpringBoot-SSM-Redis-Dubboé›†æˆ]]></title>
        <id>https://geckoc.github.io/post/springboot-ssm-redis-dubbo-ji-cheng/</id>
        <link href="https://geckoc.github.io/post/springboot-ssm-redis-dubbo-ji-cheng/">
        </link>
        <updated>2021-03-02T11:50:43.000Z</updated>
        <summary type="html"><![CDATA[<h5 id="ä¸»è¦è®°å½•ä¸€äº›ä¸»è¦æ­¥éª¤">ä¸»è¦è®°å½•ä¸€äº›ä¸»è¦æ­¥éª¤ï¼š</h5>
<ul>
<li>åœ¨é…ç½®ä¸­ï¼Œéœ€è¦å¼€å¯çš„æœåŠ¡æœ‰mysqlã€redisã€zookeeper</li>
<li>åœ¨Linuxå¼€å¯ï¼Œä¹Ÿå¯åœ¨windowsæœ¬åœ°å¼€å¯ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ç›¸åº”åœ°å€å¡«å†™æ­£ç¡®å³å¯</li>
</ul>
]]></summary>
        <content type="html"><![CDATA[<h5 id="ä¸»è¦è®°å½•ä¸€äº›ä¸»è¦æ­¥éª¤">ä¸»è¦è®°å½•ä¸€äº›ä¸»è¦æ­¥éª¤ï¼š</h5>
<ul>
<li>åœ¨é…ç½®ä¸­ï¼Œéœ€è¦å¼€å¯çš„æœåŠ¡æœ‰mysqlã€redisã€zookeeper</li>
<li>åœ¨Linuxå¼€å¯ï¼Œä¹Ÿå¯åœ¨windowsæœ¬åœ°å¼€å¯ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ç›¸åº”åœ°å€å¡«å†™æ­£ç¡®å³å¯</li>
</ul>
<!-- more -->
<p>æ€»ç»“ï¼š</p>
<ol>
<li>
<p>æ¥å£å·¥ç¨‹ [MavenJava]</p>
<ul>
<li>å­˜æ”¾æ¥å£ä»¥åŠå®ä½“ç±»</li>
</ul>
</li>
<li>
<p>æœåŠ¡æä¾›è€…å·¥ç¨‹ [SpringBootWeb]</p>
<ul>
<li>
<p>æ¥å£å®ç°ç±»ï¼š[éœ€åŠ ä¸Š@Component]</p>
<ul>
<li>@Serviceæ³¨è§£ä½¿ç”¨é˜¿é‡Œåè®®ä¸‹çš„ï¼ŒæŒ‡å®šæš´éœ²æœåŠ¡æ¥å£çš„interfaceClassæˆ–interfaceName</li>
</ul>
</li>
<li>
<p>ä¾èµ–ï¼š</p>
<ul>
<li>MySQLã€MyBatisã€Redisã€Dubboã€Zookeeper<br>
-ã€æ¥å£å·¥ç¨‹ã€‘Mybatisé€†å‘å·¥ç¨‹åˆ›å»ºå®Œæˆåå¯¼å…¥ï¼Œå¦åˆ™ç”Ÿæˆå¤±è´¥</li>
</ul>
</li>
<li>
<p>æ’ä»¶é…ç½®:</p>
<ul>
<li>mybatisé€†å‘å·¥ç¨‹æ’ä»¶<br>
<strong>mybatisè¦æ±‚mapperå’Œmapper.xmlæ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶,springbootè¦æ±‚èµ„æºæ–‡ä»¶æ”¾åœ¨resourcesä¸‹,æ‰€ä»¥è¿˜è¦åœ¨pom.xmlæ–‡ä»¶ä¸‹æ‰‹åŠ¨æŒ‡å®šç¼–è¯‘èµ„æºæ–‡ä»¶</strong></li>
</ul>
</li>
<li>
<p>application.propertiesé…ç½®</p>
<ul>
<li>å†…åµŒTomcatç«¯å£å· ä¸Šä¸‹æ–‡æ ¹</li>
<li>MySQLæ•°æ®æºè¿æ¥ä¿¡æ¯</li>
<li>Dubboé…ç½®ï¼š
<ul>
<li>spring.application.name[å”¯ä¸€æ ‡è¯† æœåŠ¡åç§°]</li>
<li>spring.dubbo.serve=true[æŒ‡å®šå·¥ç¨‹ä¸ºæœåŠ¡æä¾›è€…]</li>
<li>spring.dubbo.registry=zookeeper://localhost:2181[æ³¨å†Œä¸­å¿ƒåœ°å€]</li>
</ul>
</li>
<li>é…ç½®Redisç«¯å£å·</li>
<li>é…ç½®RedisæŒ‡å®šåœ°å€</li>
</ul>
</li>
<li>
<p>åœ¨ä¸»ç¨‹åºç±»æ·»åŠ @MapperScan()  (åŒ…æ‰«ææ³¨è§£)</p>
</li>
<li>
<p>åœ¨ä¸»ç¨‹åºç±»æ·»åŠ @EnableDubboConfiguration (dubboæ³¨è§£æ”¯æŒ)</p>
</li>
</ul>
</li>
<li>
<p>æ¶ˆè´¹è€…å·¥ç¨‹  [SpringBootWeb]</p>
<ul>
<li>
<p>ä¾èµ–</p>
<ul>
<li>dubboã€zookeeperã€æ¥å£å·¥ç¨‹</li>
</ul>
</li>
<li>
<p>application.propertiesé…ç½®</p>
<ul>
<li>
<p>dubbo</p>
<ul>
<li>spring.application.name[å”¯ä¸€æ ‡è¯† æœåŠ¡åç§°]</li>
<li>spring.dubbo.registry=zookeeper://localhost:2181[æ³¨å†Œä¸­å¿ƒåœ°å€]</li>
</ul>
</li>
<li>
<p>é…ç½®Redisç«¯å£å·</p>
</li>
<li>
<p>é…ç½®RedisæŒ‡å®šåœ°å€</p>
</li>
</ul>
</li>
<li>
<p>Controllerä¸‹æ³¨å…¥ä½¿ç”¨é˜¿é‡Œåè®®çš„@referenceæ³¨è§£</p>
<ul>
<li>ä¸æœåŠ¡æä¾›è€…ä¸­çš„interfaceClass/interfaceNameä¿æŒä¸€è‡´</li>
</ul>
</li>
<li>
<p>åœ¨ä¸»ç¨‹åºç±»æ·»åŠ @EnableDubboConfiguration (dubboæ³¨è§£æ”¯æŒ)</p>
</li>
</ul>
</li>
</ol>
<hr>
<ul>
<li>
<p>modelç±»éœ€è¦å®ç°åºåˆ—åŒ–æ¥å£</p>
</li>
<li>
<p>å¦‚æœè¦ä½¿ç”¨è®¿é—®JSP  éœ€è¦æ·»åŠ è§£æJSPä¾èµ–ï¼Œä¸”é…ç½®è§†å›¾è§£æå™¨</p>
<ul>
<li>è§£æJSPçš„ä¾èµ– SpringBootå†…åµŒTomcatå¯¹jspçš„è§£æä¾èµ–</li>
</ul>
<pre><code class="language-xml"> &lt;dependency&gt;
            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;
            &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;
 &lt;/dependency&gt;  
</code></pre>
<ul>
<li>è§†å›¾è§£æå™¨</li>
</ul>
<pre><code class="language-xml">spring.mvc.view.prefix=/
spring.mvc.view.suffix=.jsp
</code></pre>
</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Rediså­˜å–Hashå¯¹è±¡]]></title>
        <id>https://geckoc.github.io/post/redis-cun-qu-hash-dui-xiang/</id>
        <link href="https://geckoc.github.io/post/redis-cun-qu-hash-dui-xiang/">
        </link>
        <updated>2021-02-27T12:32:46.000Z</updated>
        <summary type="html"><![CDATA[<p>åœ¨å¼€å‘ä¸­ï¼Œä½¿ç”¨Redisç¼“å­˜ç¼“è§£MySQLæ•°æ®åº“çš„å‹åŠ›ï¼Œåœ¨å­˜å–Hashæ—¶é‡åˆ°çš„é—®é¢˜</p>
<ul>
<li>StringRedisSerializer()ä¸æ”¯æŒå¤šç§ç±»å‹çš„å­˜å‚¨</li>
<li>å¿…é¡»è®¾ç½®åºåˆ—åŒ–æ–¹å¼ï¼Œå¦åˆ™æ— æ³•åŒ¹é…åºåˆ—åŒ–åçš„key</li>
<li>å­˜å–å¯¹è±¡çš„ä¸¤ç§æ–¹æ³• å®ä½“ç±»éœ€å®ç°åºåˆ—åŒ–æ¥å£
<ul>
<li>æ ¹æ®IDæŸ¥è¯¢å¯¹è±¡</li>
<li>
<ol>
<li>ä½¿ç”¨boundHashOps(String.valueOf(id)).entries();</li>
</ol>
</li>
<li>
<ol start="2">
<li>ä½¿ç”¨redisTemplate.opsForHash().entries(String.valueOf(id));</li>
</ol>
</li>
<li>entries() ä»redisä¸­è·å–mapæ•°æ® é”®å€¼å¯¹</li>
</ul>
</li>
<li>å…¶ä»–æ–¹æ¡ˆå¾…æ›´æ–°</li>
</ul>
]]></summary>
        <content type="html"><![CDATA[<p>åœ¨å¼€å‘ä¸­ï¼Œä½¿ç”¨Redisç¼“å­˜ç¼“è§£MySQLæ•°æ®åº“çš„å‹åŠ›ï¼Œåœ¨å­˜å–Hashæ—¶é‡åˆ°çš„é—®é¢˜</p>
<ul>
<li>StringRedisSerializer()ä¸æ”¯æŒå¤šç§ç±»å‹çš„å­˜å‚¨</li>
<li>å¿…é¡»è®¾ç½®åºåˆ—åŒ–æ–¹å¼ï¼Œå¦åˆ™æ— æ³•åŒ¹é…åºåˆ—åŒ–åçš„key</li>
<li>å­˜å–å¯¹è±¡çš„ä¸¤ç§æ–¹æ³• å®ä½“ç±»éœ€å®ç°åºåˆ—åŒ–æ¥å£
<ul>
<li>æ ¹æ®IDæŸ¥è¯¢å¯¹è±¡</li>
<li>
<ol>
<li>ä½¿ç”¨boundHashOps(String.valueOf(id)).entries();</li>
</ol>
</li>
<li>
<ol start="2">
<li>ä½¿ç”¨redisTemplate.opsForHash().entries(String.valueOf(id));</li>
</ol>
</li>
<li>entries() ä»redisä¸­è·å–mapæ•°æ® é”®å€¼å¯¹</li>
</ul>
</li>
<li>å…¶ä»–æ–¹æ¡ˆå¾…æ›´æ–°</li>
</ul>
<!-- more -->
<h3 id="ä½¿ç”¨boundhashops">ä½¿ç”¨boundHashOps</h3>
<pre><code class="language-java">@Component
@Service(interfaceClass = StudentService.class, timeout = 24000, version = &quot;1.0.0&quot;)
public class StudentServiceImpl implements StudentService {

    @Resource
    private StudentMapper studentMapper;
    @Resource
    private RedisTemplate&lt;Object,Object&gt; redisTemplate;

    public Map&lt;Object, Object&gt; queryStudentById(Integer id) {
        // è®¾ç½® redisTemplate å¯¹è±¡ key çš„åºåˆ—åŒ–æ–¹å¼
        redisTemplate.setKeySerializer(new StringRedisSerializer());
        // å…ˆä»Redisç¼“å­˜ä¸­æŸ¥æ‰¾è·å–ï¼Œæ²¡æœ‰åˆ™ä»MySQLæ•°æ®ä¸­æŸ¥æ‰¾å¹¶è·å–
        // entries() ä»redisä¸­è·å–mapæ•°æ® é”®å€¼å¯¹
        Map&lt;Object, Object&gt; student = redisTemplate.boundHashOps(String.valueOf(id)).entries();
        assert student != null;
        //  å¦‚æœä¸ºç©º(ç¬¬ä¸€æ¬¡æŸ¥è¯¢) åˆ™å»æ•°æ®åº“æŸ¥è¯¢å¹¶å­˜æ”¾åˆ°Redisç¼“å­˜ä¸­
        if (student.size() == 0 ){
            student = studentMapper.selectByKey(id);
            redisTemplate.boundHashOps(String.valueOf(id)).put(&quot;id&quot;,student.get(&quot;id&quot;));
            redisTemplate.boundHashOps(String.valueOf(id)).put(&quot;name&quot;,student.get(&quot;name&quot;));
            redisTemplate.boundHashOps(String.valueOf(id)).put(&quot;age&quot;,student.get(&quot;age&quot;));
            // è®¾ç½®æœ‰æ•ˆæ—¶é—´ ä¸è®¾ç½®åˆ™æ°¸ä¹…ä¿å­˜
            redisTemplate.expire(String.valueOf(id),2, TimeUnit.MINUTES);
        }
        return student;
    }
}
</code></pre>
<hr>
<h3 id="ä½¿ç”¨opsforhash">ä½¿ç”¨opsForHash</h3>
<pre><code class="language-java">@Component
@Service(interfaceClass = StudentService.class, timeout = 24000, version = &quot;1.0.0&quot;)
public class StudentServiceImpl implements StudentService {

    @Resource
    private StudentMapper studentMapper;
    @Resource
    private RedisTemplate&lt;Object,Object&gt; redisTemplate;

 public Map&lt;Object, Object&gt; queryStudentById(Integer id) {
        // è®¾ç½®keyåºåˆ—åŒ–è§„åˆ™
        redisTemplate.setKeySerializer(new StringRedisSerializer());
        // å…ˆä»redisç¼“å­˜ä¸­è·å–æ•°æ®
        Map&lt;Object, Object&gt; student = redisTemplate.opsForHash().entries(String.valueOf(id));
        // ç¬¬ä¸€æ¬¡è®¿é—®ï¼Œredisç¼“å­˜ä¸­æ²¡æœ‰æ•°æ®ï¼Œåˆ™ä»MySQLæ•°æ®åº“ä¸­å–
        if (student.size() == 0){
            student = studentMapper.selectByKey(id);
        // æ•°æ®å­˜åˆ°redisç¼“å­˜ä¸­
           redisTemplate.opsForHash().put(String.valueOf(id),&quot;id&quot;,student.get(&quot;id&quot;));
           redisTemplate.opsForHash().put(String.valueOf(id),&quot;name&quot;,student.get(&quot;name&quot;));
           redisTemplate.opsForHash().put(String.valueOf(id),&quot;age&quot;,student.get(&quot;age&quot;));
        // è®¾ç½®æœ‰æ•ˆæ—¶é—´  ä¸è®¾ç½®åˆ™æ°¸ä¹…ä¿å­˜
           redisTemplate.expire(id,60,TimeUnit.SECONDS);
        }
        return student;
    }
 }
</code></pre>
<p>è®¾ç½® redisTemplate å¯¹è±¡ key çš„åºåˆ—åŒ–æ–¹å¼,Putæ—¶keyå·²ç»åºåˆ—åŒ–ï¼Œå¿…é¡»è®¾ç½®<br>
å¦åˆ™æ¯æ¬¡boundHashOps(String.valueOf(id))è¿”å›çš„éƒ½æ˜¯æ–°çš„Hash</p>
<ul>
<li>StringRedisSerializer
<ul>
<li>åªèƒ½å­˜å‚¨ç±»å‹ä¸ºStringçš„valueï¼Œå½“å­˜å‚¨å…¶ä»–ç±»å‹çš„æ•°æ®æ—¶ï¼Œåˆ™æ— æ³•å°†valueä¿å­˜åˆ°Redisï¼Œå¿…é¡»è½¬ä¸ºString</li>
</ul>
</li>
</ul>
<p>ç½‘ä¸ŠæŸ¥è¯¢å‚è€ƒï¼š<br>
ä½¿ç”¨JackSon2JsonRedisSerializerï¼Œæ‰èƒ½æ”¯æŒå­˜å‚¨å¤šç§æ•°æ®ç±»å‹ï¼Œé¿å…å­˜å‚¨äº†ä¸€äº›æ•°æ®ä¹‹åå†è¿›è¡Œè½¬æ¢ä»¥åŠå†å²æ•°æ®è¿›è¡Œå¤„ç†çš„éº»çƒ¦ï¼Œæœ‰å¾…å®è·µ</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Gitï¼šerror: failed to push some refs to]]></title>
        <id>https://geckoc.github.io/post/giterror-failed-to-push-some-refs-to/</id>
        <link href="https://geckoc.github.io/post/giterror-failed-to-push-some-refs-to/">
        </link>
        <updated>2021-02-24T09:21:14.000Z</updated>
        <summary type="html"><![CDATA[<p>åœ¨ä¸€æ¬¡å­¦ä¹ è¿‡ç¨‹ä¸­ï¼ŒåŒæ—¶ä½¿ç”¨tortoiseGitå’ŒGitè¿›è¡Œè¿œç¨‹æ¨é€ï¼Œçªç„¶å‡ºç°é”™è¯¯error: failed to push some refs to</p>
]]></summary>
        <content type="html"><![CDATA[<p>åœ¨ä¸€æ¬¡å­¦ä¹ è¿‡ç¨‹ä¸­ï¼ŒåŒæ—¶ä½¿ç”¨tortoiseGitå’ŒGitè¿›è¡Œè¿œç¨‹æ¨é€ï¼Œçªç„¶å‡ºç°é”™è¯¯error: failed to push some refs to</p>
<!-- more -->
<p><img src="https://geckoc.github.io//post-images/1614158838487.png" alt="" loading="lazy"><br>
è‡ªè¡ŒGoogleäº†ä¸€ç•ªï¼Œè¿™ä¸ªé”™è¯¯çš„å‘ç”ŸåŸå› è¿˜ä¸å°‘</p>
<h2 id="åˆ†æ”¯åä¸å®Œæ•´">åˆ†æ”¯åä¸å®Œæ•´</h2>
<ul>
<li>è¦æ³¨æ„çš„æ˜¯æœ¬åœ°åˆ†æ”¯åå’Œè¿œç¨‹åˆ†æ”¯åä¸ä¸€æ ·çš„æƒ…å†µ</li>
</ul>
<p><strong>è¯­æ³•å¦‚ä¸‹</strong></p>
<pre><code>git push @remoteName  @localBranch:@remoteBranch
// eg.remoteName:origin  localBranch:localTest  remoteBranch:remoteTest
git push origin localTest:remoteTest
</code></pre>
<ul>
<li>æœ¬åœ°åˆ†æ”¯åä¸è¿œç¨‹åˆ†æ”¯åä¸€è‡´çš„æƒ…å†µï¼Œå¯ç®€å†™ï¼Œä¾‹å¦‚ï¼šæœ¬åœ°è¿œç¨‹åˆ†æ”¯éƒ½æ˜¯master</li>
</ul>
<pre><code>git push origin master
</code></pre>
<p>ç¡®è®¤åˆ†æ”¯åæ²¡æœ‰å†™é”™ï¼Œç»§ç»­å¾€ä¸‹</p>
<h2 id="æ²¡æœ‰æäº¤ä»£ç -commit">æ²¡æœ‰æäº¤ä»£ç   commit</h2>
<p>å¯ä»¥git status æŸ¥çœ‹ä»£ç æäº¤çŠ¶æ€ ,å¿˜è®°æäº¤åˆ™æäº¤å†pushå³å¯</p>
<pre><code>  git add test
  git commit -m &quot;This is a new commit&quot;
  git push origin master
</code></pre>
<h2 id="æœ¬åœ°ä¸è¿œç¨‹äº§ç”Ÿå†²çª">æœ¬åœ°ä¸è¿œç¨‹äº§ç”Ÿå†²çª</h2>
<p><em>è¿™æ˜¯æˆ‘äº§ç”Ÿé”™è¯¯çš„åŸå› </em></p>
<p>ç”±äºä½¿ç”¨Gitå’ŒTortoiseGitåŒæ—¶æ“ä½œä¸€ä¸ªå·¥ä½œåŒºï¼Œæ¨é€åŒä¸€ä¸ªè¿œç¨‹ä»“åº“ï¼Œå¯¼è‡´å†²çª<br>
å¯ä»¥çœ‹åˆ°é”™è¯¯hint(æç¤º)  <strong>hint: 'git pull ...') before pushing again.</strong><br>
å¤„ç†æ–¹å¼ä¸€ï¼š  å…ˆæ‹‰å–å†æ‰§è¡Œæ¨é€</p>
<pre><code>  git pull â€“-rebase origin maste
  git push origin master
</code></pre>
<p>ä¸æ¨èä½¿ç”¨æš´åŠ›å¼ºåˆ¶æäº¤ï¼Œè‡³äº <em>--rebase</em> æœ‰ä»€ä¹ˆä½œç”¨ï¼Œæ˜¯ä»€ä¹ˆæ„æ€ï¼Œä¸æ¸…ä¸æ¥šç”¨èµ·æ¥ä¹Ÿå¿å¿‘ä¸å®‰ï¼›<br>
å‚è€ƒå»–é›ªå³°è€å¸ˆçš„æ–‡ç«  ï¼š<a href="https://www.liaoxuefeng.com/wiki/896043488029600/1216289527823648">rebase &quot;å˜åŸº&quot;</a></p>
<ul>
<li>
<p>rebaseæ“ä½œå¯ä»¥æŠŠæœ¬åœ°æœªpushçš„åˆ†å‰æäº¤å†å²æ•´ç†æˆç›´çº¿ï¼›</p>
</li>
<li>
<p>rebaseçš„ç›®çš„æ˜¯ä½¿å¾—æˆ‘ä»¬åœ¨æŸ¥çœ‹å†å²æäº¤çš„å˜åŒ–æ—¶æ›´å®¹æ˜“ï¼Œå› ä¸ºåˆ†å‰çš„æäº¤éœ€è¦ä¸‰æ–¹å¯¹æ¯”ã€‚</p>
</li>
</ul>
<p>å¤„ç†æ–¹å¼äºŒï¼šå¼ºåˆ¶æäº¤ (ä¸æ¨èä½¿ç”¨)</p>
<pre><code class="language-git">  git push -f origin master
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ç¦ç”¨æˆ–å¯åŠ¨ç¬”è®°æœ¬å†…ç½®é”®ç›˜]]></title>
        <id>https://geckoc.github.io/post/bi-ji-ben-nei-zhi-jian-pan/</id>
        <link href="https://geckoc.github.io/post/bi-ji-ben-nei-zhi-jian-pan/">
        </link>
        <updated>2021-01-07T01:21:58.000Z</updated>
        <summary type="html"><![CDATA[<h4 id="1-ç¦ç”¨å†…ç½®é”®ç›˜è§¦æ‘¸æ¿">1. ç¦ç”¨å†…ç½®é”®ç›˜&amp;è§¦æ‘¸æ¿</h4>
]]></summary>
        <content type="html"><![CDATA[<h4 id="1-ç¦ç”¨å†…ç½®é”®ç›˜è§¦æ‘¸æ¿">1. ç¦ç”¨å†…ç½®é”®ç›˜&amp;è§¦æ‘¸æ¿</h4>
<!-- more -->
<p>å¯åŠ¨ç®¡ç†å‘˜å‘½ä»¤è¡Œ(Win+x)ï¼Œé€‰æ‹©windowsPowershe(ç®¡ç†å‘˜)  (å‘½ä»¤æç¤ºç¬¦)</p>
<figure data-type="image" tabindex="1"><img src="https://geckoc.github.io//post-images/1609982577853.png" alt="" loading="lazy"></figure>
<p>åœ¨æ‰“å¼€çš„çª—å£ä¸­ï¼šè¾“å…¥cmdï¼Œå¹¶æ•²å‡»å›è½¦</p>
<p>ç„¶åè¾“å…¥ sc config i8042prt start= disabled</p>
<p>æç¤ºæˆåŠŸåé‡å¯ç”µè„‘å³å¯ï¼Œå¼€å¯åˆ™æ˜¯æŠŠdisabledæ¢æˆauto</p>
<p>sc config i8042prt start= disabled (å…³)</p>
<p>sc config i8042prt start= auto(å¼€)</p>
<figure data-type="image" tabindex="2"><img src="https://geckoc.github.io//post-images/1609982602898.png" alt="" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Mysqlæ— æ³•å¯åŠ¨Plugin FEDERATED is disabled]]></title>
        <id>https://geckoc.github.io/post/mysql-plugin-federated-is-disabled/</id>
        <link href="https://geckoc.github.io/post/mysql-plugin-federated-is-disabled/">
        </link>
        <updated>2021-01-07T01:17:53.000Z</updated>
        <summary type="html"><![CDATA[<h2 id="mysqlæ— æ³•å¯åŠ¨plugin-federated-is-disabledå®Œç¾è§£å†³">Mysqlæ— æ³•å¯åŠ¨Plugin FEDERATED is disabledå®Œç¾è§£å†³</h2>
]]></summary>
        <content type="html"><![CDATA[<h2 id="mysqlæ— æ³•å¯åŠ¨plugin-federated-is-disabledå®Œç¾è§£å†³">Mysqlæ— æ³•å¯åŠ¨Plugin FEDERATED is disabledå®Œç¾è§£å†³</h2>
<!-- more -->
<blockquote>
<p>WampServer , MySQL 5.5.8</p>
<p>ç”µè„‘æ„å¤–å…³æœºåï¼ŒæœåŠ¡å¯åŠ¨å¤±è´¥ï¼Œè‡ªåŠ¨å…³é—­</p>
<p>æŸ¥çœ‹äº†mysql.log é”™è¯¯æ—¥å¿—</p>
</blockquote>
<pre><code class="language-clojure">201211  0:52:24 [Note] Plugin 'FEDERATED' is disabled.
InnoDB: The InnoDB memory heap is disabled
InnoDB: Mutexes and rw_locks use Windows interlocked functions
InnoDB: Compressed tables use zlib 1.2.3
201211  0:52:24  InnoDB: Error: unable to create temporary file; errno: 2
201211  0:52:24 [ERROR] Plugin 'InnoDB' init function returned error.
201211  0:52:24 [ERROR] Plugin 'InnoDB' registration as a STORAGE ENGINE failed.
201211  0:52:24 [ERROR] Unknown/unsupported storage engine: InnoDB
201211  0:52:24 [ERROR] Aborting

201211  0:52:24 [Note] wampmysqld: Shutdown complete
</code></pre>
<p>ä»¥ä¸Š</p>
<p>ç½‘ä¸Šæ‰¾åˆ°æ–¹æ³•,åœ¨My.iniæ–‡ä»¶ä¸­çš„[mysqld]ä¸­å¢åŠ ä¸€è¡Œ</p>
<p>æˆ‘çš„æ˜¯[wampmysqld]</p>
<p>tmpdir=d:/wamp/tmp</p>
<p>[mysqld]  å¢åŠ ä¸€è¡Œï¼Œæ³¨æ„æ˜¯ mysqld</p>
<p>federated</p>
<p>é‡å¯æœåŠ¡æˆåŠŸ</p>
<pre><code class="language-clojure">201214  8:36:43  InnoDB: Initializing buffer pool, size = 128.0M
201214  8:36:43  InnoDB: Completed initialization of buffer pool
201214  8:36:43  InnoDB: highest supported file format is Barracuda.
201214  8:36:48  InnoDB: 1.1.4 started; log sequence number 1785000
201214  8:36:51 [Note] Event Scheduler: Loaded 0 events
201214  8:36:51 [Note] wampmysqld: ready for connections.
Version: '5.5.8-log'  socket: ''  port: 3306  MySQL Community Server (GPL)
</code></pre>
<p>é¡ºä¾¿è®°ä¸‹</p>
<p>skip-external-locking</p>
<p>skip-name-resolve</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[JQuerySummary]]></title>
        <id>https://geckoc.github.io/post/jquerysummary/</id>
        <link href="https://geckoc.github.io/post/jquerysummary/">
        </link>
        <updated>2021-01-06T13:38:22.000Z</updated>
        <summary type="html"><![CDATA[<h3 id="æ–‡æœ¬æ“ä½œ">æ–‡æœ¬æ“ä½œ</h3>
<p>html()//å–å¾—ç¬¬ä¸€ä¸ªåŒ¹é…å…ƒç´ çš„htmlå†…å®¹ï¼ŒåŒ…å«æ ‡ç­¾å†…å®¹<br>
html(val)//è®¾ç½®æ‰€æœ‰åŒ¹é…å…ƒç´ çš„htmlå†…å®¹ï¼Œè¯†åˆ«æ ‡ç­¾ï¼Œèƒ½å¤Ÿè¡¨ç°å‡ºæ ‡ç­¾çš„æ•ˆæœ</p>
]]></summary>
        <content type="html"><![CDATA[<h3 id="æ–‡æœ¬æ“ä½œ">æ–‡æœ¬æ“ä½œ</h3>
<p>html()//å–å¾—ç¬¬ä¸€ä¸ªåŒ¹é…å…ƒç´ çš„htmlå†…å®¹ï¼ŒåŒ…å«æ ‡ç­¾å†…å®¹<br>
html(val)//è®¾ç½®æ‰€æœ‰åŒ¹é…å…ƒç´ çš„htmlå†…å®¹ï¼Œè¯†åˆ«æ ‡ç­¾ï¼Œèƒ½å¤Ÿè¡¨ç°å‡ºæ ‡ç­¾çš„æ•ˆæœ</p>
<!-- more -->
<p>text()// å–å¾—æ‰€æœ‰åŒ¹é…å…ƒç´ çš„å†…å®¹ï¼Œåªæœ‰æ–‡æœ¬å†…å®¹ï¼Œæ²¡æœ‰æ ‡ç­¾<br>
text(val)//è®¾ç½®æ‰€æœ‰åŒ¹é…å…ƒç´ çš„å†…å®¹ï¼Œä¸è¯†åˆ«æ ‡ç­¾ï¼Œå°†æ ‡ç­¾ä½œä¸ºæ–‡æœ¬æ’å…¥è¿›å»<br>
ç¤ºä¾‹:</p>
<pre><code class="language-javascript">$('.c1').text('&lt;h3&gt;ä½ å¥½,ç†æŸ¥å¾·&lt;/h3&gt;');
$('.c1').html('&lt;h3&gt;ä½ å¥½,ç†æŸ¥å¾·&lt;/h3&gt;');
</code></pre>
<h3 id="å±æ€§æ“ä½œ">å±æ€§æ“ä½œ</h3>
<pre><code class="language-javascript">attr(attrName)// è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…å…ƒç´ çš„å±æ€§å€¼
attr(attrName, attrValue)// ä¸ºæ‰€æœ‰åŒ¹é…å…ƒç´ è®¾ç½®ä¸€ä¸ªå±æ€§å€¼
attr({k1: v1, k2:v2})// ä¸ºæ‰€æœ‰åŒ¹é…å…ƒç´ è®¾ç½®å¤šä¸ªå±æ€§å€¼
removeAttr(attrName)// ä»æ¯ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ ä¸­åˆ é™¤ä¸€ä¸ªå±æ€§

ç¤ºä¾‹:
	è®¾ç½®å•ä¸ªå±æ€§
		$('.c1').attr('xx','oo');
	è®¾ç½®å¤šä¸ªå±æ€§
		$('.c1').attr({'age':'18','sex':'alex'});
	æŸ¥çœ‹å±æ€§
		$('.c1').attr('å±æ€§å');
    	$('.c1').attr('xx');
    åˆ é™¤å±æ€§
    	$('.c1').removeAttr('xx');

prop -- é’ˆå¯¹çš„æ˜¯checked\selected\disabled..

æŸ¥çœ‹æ ‡ç­¾æ˜¯å¦æœ‰checkedå±æ€§,ä¹Ÿå°±æ˜¯æ˜¯å¦è¢«é€‰ä¸­
	    attr $(':checked').attr('checked'); //checked -- undefined
	    prop $(':checked').prop('checked'); //true  -- false
		
		é€šè¿‡è®¾ç½®å±æ€§çš„æ–¹å¼æ¥è®¾ç½®æ˜¯å¦é€‰ä¸­:
			$(':radio').eq(2).prop('checked',true);  trueå’Œfalseä¸èƒ½åŠ å¼•å·
			$(':radio').eq(2).prop('checked',false);

ç®€å•æ€»ç»“:
	1.å¯¹äºæ ‡ç­¾ä¸Šæœ‰çš„èƒ½çœ‹åˆ°çš„å±æ€§å’Œè‡ªå®šä¹‰å±æ€§éƒ½ç”¨attr
	2.å¯¹äºè¿”å›å¸ƒå°”å€¼çš„æ¯”å¦‚checkboxã€radioå’Œoptionçš„æ˜¯å¦è¢«é€‰ä¸­æˆ–è€…è®¾ç½®å…¶è¢«é€‰ä¸­ä¸å–æ¶ˆé€‰ä¸­éƒ½ç”¨propã€‚
	å…·æœ‰ true å’Œ false ä¸¤ä¸ªå±æ€§çš„å±æ€§ï¼Œå¦‚ checked, selected æˆ–è€… disabled ä½¿ç”¨prop()ï¼Œå…¶ä»–çš„ä½¿ç”¨ attr()
</code></pre>
<h3 id="æ–‡æ¡£å¤„ç†">æ–‡æ¡£å¤„ç†</h3>
<pre><code class="language-javascript">æ·»åŠ åˆ°æŒ‡å®šå…ƒç´ å†…éƒ¨çš„åé¢
	$(A).append(B)// æŠŠBè¿½åŠ åˆ°A
	$(A).appendTo(B)// æŠŠAè¿½åŠ åˆ°B
	#æ·»åŠ å­—ç¬¦ä¸²ç…§æ ·èƒ½è¯†åˆ«æ ‡ç­¾
	$('#d1').append('&lt;a href=&quot;http://www.jd.com&quot;&gt;äº¬ä¸œ&lt;/a&gt;');
æ·»åŠ åˆ°æŒ‡å®šå…ƒç´ å†…éƒ¨çš„å‰é¢
	$(A).prepend(B)// æŠŠBå‰ç½®åˆ°A
	$(A).prependTo(B)// æŠŠAå‰ç½®åˆ°B
	ç¤ºä¾‹
		$('a').prependTo($('div'));

æ·»åŠ åˆ°æŒ‡å®šå…ƒç´ å¤–éƒ¨çš„åé¢
	$(A).after(B)// æŠŠBæ”¾åˆ°Açš„åé¢
	$(A).insertAfter(B)// æŠŠAæ”¾åˆ°Bçš„åé¢

æ·»åŠ åˆ°æŒ‡å®šå…ƒç´ å¤–éƒ¨çš„å‰é¢
	$(A).before(B)// æŠŠBæ”¾åˆ°Açš„å‰é¢
	$(A).insertBefore(B)// æŠŠAæ”¾åˆ°Bçš„å‰é¢
	
ç§»é™¤å’Œæ¸…ç©ºå…ƒç´ 
	remove()// ä»DOMä¸­åˆ é™¤æ‰€æœ‰åŒ¹é…çš„å…ƒç´ ã€‚
	empty()// åˆ é™¤åŒ¹é…çš„å…ƒç´ é›†åˆä¸­æ‰€æœ‰çš„å­èŠ‚ç‚¹ï¼ŒåŒ…æ‹¬æ–‡æœ¬è¢«å…¨éƒ¨åˆ é™¤ï¼Œä½†æ˜¯åŒ¹é…çš„å…ƒç´ è¿˜
	$('div').remove();
	$('div').empty();

æ›¿æ¢
	replaceWith()
	replaceAll()
	ç¤ºä¾‹:
		var a = document.createElement('a')
		a.href = 'http://www.baidu.com';
		a.innerText = 'xxx';
		
		$('span').replaceWith(a);
		$(a).replaceAll('span');
		
clone()å…‹éš†
	&lt;button class=&quot;btn&quot;&gt;å± é¾™å®åˆ€,ç‚¹å‡»å°±é€!&lt;/button&gt;	

    $('.btn').click(function () {
        // var a = $(this).clone(); //å…‹éš†æ ‡ç­¾
        var a = $(this).clone(true);  //è¿å¸¦äº‹ä»¶ä¸€èµ·å…‹éš†
        $(this).after(a);

    })
</code></pre>
<h3 id="å¸¸ç”¨äº‹ä»¶">å¸¸ç”¨äº‹ä»¶</h3>
<pre><code class="language-javascript">&lt;div class=&quot;c1&quot;&gt;&lt;/div&gt;

click(function(){...})
	$('#d1').on('click',function () {
        $(this).css({'background-color':'green'})
    })
hover(function(){...})
	//é¼ æ ‡æ‚¬æµ® è§¦å‘äº‹ä»¶
    $('.c1').hover(
        //é¼ æ ‡æ”¾ä¸Šå»
        function () {
            $(this).css({'background-color':'blue'});
        },
        function(){
            $(this).css({'background-color':'black'});
        }
    );


blur(function(){...})
	//å¤±å»å…‰æ ‡(ç„¦ç‚¹)æ—¶è§¦å‘äº‹ä»¶ ä½¿divå˜è‰²
    $('[type=&quot;text&quot;]').blur(function () {
        $('.c1').css({'background-color':'pink'})
    })
focus(function(){...})  //è·å–å…‰æ ‡æ—¶è§¦å‘äº‹ä»¶ ä½¿divå˜è‰²
	$('[type=&quot;text&quot;]').focus(function () {
        $('.c1').css({'background-color':'black'})
    })
                 
change(function(){...}) //å†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œinputï¼Œselectç­‰
	//ä¸å†…å®¹å‘æ”¹å˜æ—¶è§¦å‘çš„äº‹ä»¶
    $('select').change(function () {
        $('.c1').toggleClass('cc')
    })


keyup(function(){...})	//é”®ç›˜æŠ¬èµ·è§¦å‘äº‹ä»¶
    $(window).keyup(function (e) {
        console.log(e.keyCode);
    })


keydown(function(){...})	//é”®ç›˜æŒ‰é”®æŒ‰ä¸‹äº‹ä»¶  å‚æ•°e/event
	$(window).keydown(function (e) {
        console.log(e.keyCode) //æ¯ä¸ªé”®éƒ½æœ‰ä¸€ä¸ªkeycodeé”® ï¼Œé€šè¿‡ä¸åŒçš„å€¼è§¦å‘ä¸åŒçš„äº‹ä»¶
        if(e.keyCode===37){
            $('.c1').css({'background-color':'green'})
        }else if(e.keyCode===39){
            $('.c1').css({'background-color':'balck'})
        }
        else{
            $('.c1').css({'background-color':'yellow'})
        }
    })


mouseenter(function(){...})	// é¼ æ ‡æ‚¬æµ®  ç­‰åŒäºhoveräº‹ä»¶
mouseout(function(){...})
	$('.c1').mouseenter(function () {
        $(this).css({'background-color':'blue'});
    });
    $('.c1').mouseout(function () {
        $(this).css({'background-color':'yellow'});
    });


//é¼ æ ‡æ‚¬æµ® åªè§¦å‘ä¸€æ¬¡
    $('.c2').mouseenter(function () {
        console.log('ä½ å˜äº†');
    });
//é¼ æ ‡æ‚¬æµ®  è¿ç»­è§¦å‘
    $('.c2').mouseover(function () {
        console.log('ä½ å˜äº†');
    })
# mouseover å’Œ mouseenterçš„åŒºåˆ«æ˜¯ï¼š
# mouseoveräº‹ä»¶æ˜¯å¦‚æœè¯¥æ ‡ç­¾æœ‰å­æ ‡ç­¾ï¼Œ
# é‚£ä¹ˆç§»åŠ¨åˆ°è¯¥æ ‡ç­¾æˆ–è€…ç§»åŠ¨åˆ°å­æ ‡ç­¾æ—¶ä¼šè¿ç»­è§¦å‘ï¼Œ
# mmouseenteräº‹ä»¶ä¸ç®¡æœ‰æ²¡æœ‰å­æ ‡ç­¾éƒ½åªè§¦å‘ä¸€æ¬¡ï¼Œè¡¨ç¤ºé¼ æ ‡è¿›å…¥è¿™ä¸ªå¯¹è±¡
</code></pre>
<h3 id="é˜»æ­¢åç»­å†’æ³¡äº‹ä»¶å‘ç”Ÿ">é˜»æ­¢åç»­ï¼ˆå†’æ³¡ï¼‰äº‹ä»¶å‘ç”Ÿ</h3>
<pre><code class="language-javascript">//å†’æ³¡çš„æ„æ€å°±æ˜¯å› ä¸ºhtmlå¯ä»¥åµŒå¥—ï¼Œå¦‚æœä½ ç»™å„¿å­æ ‡ç­¾ç»‘å®šäº†ç‚¹äº‹ä»¶æˆ–è€…æ²¡æœ‰ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œ
//çˆ¶çº§æ ‡ç­¾ç»‘å®šäº†ç‚¹å‡»äº‹ä»¶ï¼Œé‚£ä¹ˆä½ ä¸€ç‚¹å‡»å­æ ‡ç­¾ï¼Œä¸ç®¡å­æ ‡ç­¾æœ‰æ²¡æœ‰ç»‘å®šäº‹ä»¶ï¼Œ
//éƒ½ä¼šè§¦å‘çˆ¶çº§æ ‡ç­¾çš„ç‚¹å‡»äº‹ä»¶ï¼Œå¦‚æœæœ‰ï¼Œä¼šå…ˆè§¦å‘å­æ ‡ç­¾çš„ç‚¹å‡»äº‹ä»¶ï¼Œ
//ç„¶åè§¦å‘çˆ¶çº§æ ‡ç­¾çš„ç‚¹å‡»äº‹ä»¶ï¼Œä¸ç®¡å­æ ‡ç­¾æœ‰æ²¡æœ‰ç‚¹å‡»äº‹ä»¶ï¼Œéƒ½ä¼šä¸€çº§ä¸€çº§çš„è¿˜å¾€ä¸Šæ‰¾ç‚¹å‡»äº‹ä»¶

$('#d1').click(function () {
        alert('çˆ¶çº§æ ‡ç­¾')
    })
    $('#d2').click(function (e) {	//è¿™ä¸ªå‚æ•°e(åªæ˜¯ä¸ªå½¢å‚ï¼Œå†™evtæˆ–è€…eventåå­—çš„ä¹Ÿå¾ˆå¤š)è¡¨ç¤ºå½“å‰äº‹ä»¶æœ¬èº«ï¼Œè¿™ä¸ªäº‹ä»¶ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡
        alert('å­çº§æ ‡ç­¾')
        // return false;	//è¿™ä¸ªä¹Ÿå¯ä»¥é˜»æ­¢
        e.stopPropagation();//ç”¨äº‹ä»¶å¯¹è±¡çš„è¿™ä¸ªæ–¹æ³•å°±èƒ½é˜»æ­¢å†’æ³¡ ï¼ˆPropagationï¼šä¼ é€’çš„æ„æ€ï¼‰
    })
</code></pre>
<h3 id="é¡µé¢è½½å…¥">é¡µé¢è½½å…¥</h3>
<blockquote>
<p>â€‹	  å°†jsä»£ç å†™åˆ°headæ ‡ç­¾å’Œå†™é“bodyæ ‡ç­¾ä¸‹é¢çš„ä½œç”¨æ˜¯ä¸åŒçš„ï¼Œå†™åœ¨headæ ‡ç­¾é‡Œé¢çš„è¯ï¼Œ</p>
<p>å¦‚æœä½ å†™äº†æ“ä½œæŸä¸ªæ ‡ç­¾çš„å†…å®¹çš„è¯ï¼Œé‚£ä¸ªæ ‡ç­¾è¿˜æ²¡åŠ è½½å‡ºæ¥ï¼Œå…ˆåŠ è½½äº†ä½ çš„jsä»£ç ï¼Œå°±æ‰¾ä¸åˆ°è¿™ä¸ªæ ‡ç­¾ï¼Œæ‰€ä»¥ä¸ä¼šç”Ÿæ•ˆï¼Œæ‰€ä»¥å†™åœ¨bodyæ ‡ç­¾æœ€ä¸‹é¢æ˜¯ä¸€ç§è§£å†³åŠæ³•ã€‚</p>
<p>è¿˜æœ‰ä¸€ç§åŠæ³•å°±æ˜¯window.onload=function(){jsçš„ä»£ç }ï¼Œç­‰é¡µé¢ä¸Šæ‰€æœ‰çš„å…ƒç´ éƒ½åŠ è½½å®Œï¼Œåœ¨æ‰§è¡Œè¿™é‡Œé¢çš„jsä»£ç ï¼Œè¿˜è®°å¾—å—ï¼Ÿä½†æ˜¯è¿™ä¸ªwindow.onloadæœ‰ä¸ªç¼ºç‚¹ï¼›</p>
<p>è¿™ä¸ªç¼ºç‚¹å°±æ˜¯è¿™ä¸ªæ“ä½œæ—¶ç»™window.onloadèµ‹å€¼ï¼Œå¦‚æœä½ è‡ªå·±å†™äº†ä¸¤ä¸ªjsæ–‡ä»¶ï¼Œæ¯ä¸ªjsæ–‡ä»¶ä¸­éƒ½æœ‰ä¸€ä¸ªwindow.onloadçš„è¯ï¼Œé‚£ä¹ˆåå¼•å…¥çš„æ–‡ä»¶ä¼šæŠŠå‰é¢å¼•å…¥çš„æ–‡ä»¶çš„window.onloadé‡Œé¢çš„jsä»£ç å…¨éƒ¨è¦†ç›–æ‰ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªæ–‡ä»¶çš„jsä»£ç å°±å¤±å»äº†æ•ˆæœï¼›</p>
<p>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œwindow.onloadä¼šç­‰åˆ°é¡µé¢ä¸Šçš„æ–‡æ¡£ã€å›¾ç‰‡ã€è§†é¢‘ç­‰æ‰€æœ‰èµ„æºéƒ½åŠ è½½å®Œæ‰æ‰§è¡Œé‡Œé¢çš„jsä»£ç ï¼Œå¯¼è‡´æœ‰äº›æ•ˆæœçš„åŠ è½½æ¯”è¾ƒæ…¢ï¼›</p>
<p>æ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„å†™æ³•ï¼Œä¸å­˜åœ¨è¦†ç›–é—®é¢˜ï¼Œè€Œä¸”åªè¦æ–‡æ¡£åŠ è½½å®Œå°±è§¦å‘ï¼Œä¸éœ€è¦ç­‰ç€ä¸€äº›å›¾ç‰‡å•Šè§†é¢‘å•Šä»€ä¹ˆçš„ï¼ŒåŠ è½½jsæ•ˆæœçš„é€Ÿåº¦å¿«ã€‚</p>
</blockquote>
<pre><code class="language-javascript">1.jQueryæ–‡ä»¶è¦åœ¨ä½¿ç”¨jQueryçš„ä»£ç ä¹‹å‰å¼•å…¥
2.jsä»£ç æœ€å¥½éƒ½æ”¾åœ¨bodyæ ‡ç­¾ä¸‹é¢æˆ–è€…é‡Œé¢çš„æœ€ä¸‹é¢

3.window.onload:
	window.onload = function () {
            $('.c1').click(function () {
                $(this).css({'background-color': 'green'});
            })
        }

4.é¡µé¢è½½å…¥:
$(function () {
            $('.c1').click(function () {
                $(this).css({'background-color': 'green'});
            })
        })
$(document).ready(function{});


ä¸window.onloadçš„åŒºåˆ«:
ã€€ã€€ã€€1.window.onload()å‡½æ•°æœ‰è¦†ç›–ç°è±¡ï¼Œå¿…é¡»ç­‰å¾…ç€å›¾ç‰‡èµ„æºåŠ è½½å®Œæˆä¹‹åæ‰èƒ½è°ƒç”¨
ã€€ã€€ã€€2.jQueryçš„è¿™ä¸ªå…¥å£å‡½æ•°æ²¡æœ‰å‡½æ•°è¦†ç›–ç°è±¡ï¼Œæ–‡æ¡£åŠ è½½å®Œæˆä¹‹åå°±å¯ä»¥è°ƒç”¨ï¼ˆå»ºè®®ä½¿ç”¨æ­¤å‡½æ•°ï¼‰
   
        // ç­‰å¾…æ•´ä¸ªé¡µé¢ä¸­çš„å†…å®¹å…¨éƒ¨åŠ è½½å®Œæˆä¹‹å,è§¦å‘window.onloadå¯¹åº”çš„å‡½æ•°é‡Œé¢çš„å†…å®¹
        // window.onload æœ‰è¦†ç›–ç°è±¡,ä¼šè¢«åé¢çš„window.onloadç»™é‡æ–°èµ‹å€¼
        // window.onload = function () {
        //     $('.c1').click(function () {
        //         $(this).css({'background-color':'green'});
        //     })
        // }

</code></pre>
<h3 id="eachå¾ªç¯">eachå¾ªç¯</h3>
<pre><code class="language-javascript">å¾ªç¯æ ‡ç­¾å¯¹è±¡æ•°ç»„
$('li').each(function(k,v){
    console.log(k,v);
});

å¾ªç¯æ™®é€šæ•°ç»„
var d1 = ['aa','bb','cc'];
$.each(d1,function(k,v){
    console.log(k,v);
})

è·³å‡ºå¾ªç¯  return false; ç±»ä¼¼äºbreak
$('li').each(function(k,v){
    console.log(k,v.innerText);
    if (k === 1){
        return false;
    }

});

è·³å‡ºæœ¬æ¬¡å¾ªç¯  return; ç±»ä¼¼äºcontinue
$('li').each(function(k,v){
    
    if (k === 1){
        return;
    }
    console.log(k,v.innerText);
});

</code></pre>
<h3 id="ç‚¹å‡»äº‹ä»¶å’Œæ»šåŠ¨äº‹ä»¶çš„ç¤ºä¾‹ä»£ç ">ç‚¹å‡»äº‹ä»¶å’Œæ»šåŠ¨äº‹ä»¶çš„ç¤ºä¾‹ä»£ç </h3>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;style&gt;
        .c1{
            background-color: red;
            height: 100px;
            width: 100px;
        }
        .c2{
            background-color: green;
            height: 1000px;
            width: 100px;
        }
        .c3{
            background-color: blue;
            height: 1000px;
            width: 100px;
        }
        .s1{
            position: fixed;
            left:20px;
            bottom: 20px;
            height: 40px;
            width: 80px;
            background-color: purple;
            line-height: 40px;
            text-align: center;

        }
        .s1 a{
            color: white;
            font-size: 14px;
            text-decoration: none;
        }
        .hide{
            display: none;
        }
&lt;!-- more --&gt;



    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;!--&lt;a name=&quot;top&quot;&gt;è¿™é‡Œæ˜¯é¡¶éƒ¨&lt;/a&gt;--&gt;
&lt;!--&lt;a&gt;è¿™é‡Œæ˜¯é¡¶éƒ¨&lt;/a&gt;--&gt;
&lt;span&gt;é¡¶éƒ¨ä½ç½®&lt;/span&gt;
&lt;div class=&quot;c1&quot;&gt;&lt;/div&gt;

&lt;button class=&quot;change-postion&quot;&gt;èµ°ä½ &lt;/button&gt;

&lt;div class=&quot;c2&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;c3&quot;&gt;&lt;/div&gt;

&lt;span class=&quot;s1 hide&quot;&gt;
    &lt;!--&lt;a href=&quot;#top&quot;&gt;è¿”å›é¡¶éƒ¨&lt;/a&gt;--&gt;
    &lt;span&gt;è¿”å›é¡¶éƒ¨&lt;/span&gt;

&lt;/span&gt;


&lt;script src=&quot;jquery.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
	//ç‚¹å‡»äº‹ä»¶æ¥æ”¹å˜æ ‡ç­¾ä½ç½®
    $('.change-postion').click(function () {
        $('.c1').offset({top:200,left:200});
    });
    
	//æ»šåŠ¨äº‹ä»¶,ç›‘å¬æ»šåŠ¨è·ç¦»æ¥æ˜¾ç¤ºæˆ–è€…éšè—æ ‡ç­¾
    $(window).scroll(function () {
        console.log($(window).scrollTop());
        if ($(window).scrollTop() &gt;=200){
            $('.s1').removeClass('hide');
        }else {
            $('.s1').addClass('hide');
        }
    });
    
	// å›åˆ°é¡¶éƒ¨,scrollTopè®¾ç½®å€¼
    $('.s1').click(function () {
        $(window).scrollTop(0);
    })

&lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>
]]></content>
    </entry>
</feed>